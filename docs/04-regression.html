<!DOCTYPE html>
<html>
  <head>
    <title>Regression &amp; Cousins</title>
    <meta charset="utf-8">
    <meta name="author" content="Brad Boehmke &amp; Brandon Greenwell" />
    <meta name="date" content="2019-04-01" />
    <link href="libs/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome/js/fontawesome-all.min.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/plotly-binding/plotly.js"></script>
    <script src="libs/typedarray/typedarray.min.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main/plotly-latest.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link rel="stylesheet" href="scrollable.css" type="text/css" />
    <link rel="stylesheet" href="mtheme_max.css" type="text/css" />
    <link rel="stylesheet" href="fonts_mtheme_max.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">




class: clear, center, middle

background-image: url(https://educationalresearchtechniques.files.wordpress.com/2014/08/1.jpg?w=624)
background-position: center
background-size: cover

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
.font200.bold[Regression &amp; Cousins]

---
# Introduction

.pull-left[

.center.bold.font120[Thoughts]

- a fundamental analytic method
- still widely used
- basic approaches have large assumptions
- serves as a foundation to many extension methods

]

--

.pull-right[

.center.bold.font120[Overview]

- Ordinary Least Squares
- Principal Component Regression
- Partial Least Squares Regression
- Regularized Regression
- Multivariate Adaptive Regression Splines

]

---
# Prereqs .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 1]

.pull-left[

.center.bold.font120[Packages]


```r
library(dplyr)
library(ggplot2)
library(rsample)
library(recipes)
library(vip)
library(caret)
```


]

.pull-right[

.center.bold.font120[Data]


```r
# ames data
ames &lt;- AmesHousing::make_ames()

# split data
set.seed(123)
split &lt;- initial_split(ames, strata = "Sale_Price")
ames_train &lt;- training(split)
```

]

---
class: center, middle, inverse

.font300.white[Ordinary Least Squares]

---
# The Objective

&lt;img src="04-regression_files/figure-html/unnamed-chunk-1-1.png" style="display: block; margin: auto;" /&gt;


* Model form: `\(y_i = \beta_0 + \beta_{1}x_{i1} + \beta_{2}x_{i2} \cdots + \beta_{p}x_{ip} + \epsilon_i\)`

* Objective function: `\(\text{minimize} \bigg \{ SSE = \sum^n_{i=1} (y_i - \hat{y}_i)^2 \bigg \} \equiv \text{minimize MSE}\)`

---
# Simple linear regression .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 2]

.pull-left.font120[

- .bold.blue[`lm()`] performs OLS in base R

- `glm()` also performs linear regression but extends to other generalized methods (i.e. logistic regression)

- `summary(model)` provides many results (i.e. "Residual Standard Error" is the RMSE)

- No method for resampling (i.e. cross validation) with `lm()`

]

.pull-right[

```r
model1 &lt;- lm(Sale_Price ~ Gr_Liv_Area, data = ames_train)
summary(model1)
## 
## Call:
## lm(formula = Sale_Price ~ Gr_Liv_Area, data = ames_train)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -482352  -30498   -1929   23455  325966 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 13908.322   3758.256   3.701  0.00022 ***
## Gr_Liv_Area   111.387      2.374  46.915  &lt; 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 56760 on 2197 degrees of freedom
## Multiple R-squared:  0.5005,	Adjusted R-squared:  0.5002 
## F-statistic:  2201 on 1 and 2197 DF,  p-value: &lt; 2.2e-16
```
]

---
# Multiple linear regression .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 3]

.pull-left[


```r
# OLS model with two predictors
model2 &lt;- lm(Sale_Price ~ Gr_Liv_Area + Year_Built, data = ames_train)

# OLS model with specified interactions
model3 &lt;- lm(Sale_Price ~ Gr_Liv_Area + Year_Built + Gr_Liv_Area : Year_Built, data = ames_train)

# include all possible main effects
model4 &lt;- lm(Sale_Price ~ ., data = ames_train)
```


]

.pull-right[
<div id="htmlwidget-dfa5ec2c50cdfd5200fd" style="width:504px;height:504px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-dfa5ec2c50cdfd5200fd">{"x":{"visdat":{"172287c6a2092":["function () ","plotlyVisDat"]},"cur_data":"172287c6a2092","attrs":{"172287c6a2092":{"x":{},"y":{},"z":{},"mode":"markers","marker":{"size":5,"opacity":0.25},"showlegend":false,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d"},"172287c6a2092.1":{"x":[334,384,434,484,534,584,634,684,734,784,834,884,934,984,1034,1084,1134,1184,1234,1284,1334,1384,1434,1484,1534,1584,1634,1684,1734,1784,1834,1884,1934,1984,2034,2084,2134,2184,2234,2284,2334,2384,2434,2484,2534,2584,2634,2684,2734,2784,2834,2884,2934,2984,3034,3084,3134,3184,3234,3284,3334,3384,3434,3484,3534,3584,3634,3684,3734,3784,3834,3884,3934,3984,4034,4084,4134,4184,4234,4284,4334,4384,4434,4484,4534,4584,4634,4684,4734,4784,4834,4884,4934,4984,5034,5084,5134,5184,5234,5284,5334,5384,5434,5484,5534,5584,5634],"y":[1875,1885,1895,1905,1915,1925,1935,1945,1955,1965,1975,1985,1995,2005],"z":[[-35118.3274334529,-30350.8243413288,-25583.3212492049,-20815.8181570808,-16048.3150649567,-11280.8119728325,-6513.30888070865,-1745.80578858452,3021.69730353961,7789.20039566373,12556.7034877879,17324.2065799118,22091.7096720359,26859.21276416,31626.7158562841,36394.218948408,41161.7220405322,45929.2251326563,50696.7282247804,55464.2313169045,60231.7344090284,64999.2375011526,69766.7405932767,74534.2436854008,79301.7467775247,84069.2498696488,88836.752961773,93604.2560538971,98371.7591460212,103139.262238145,107906.765330269,112674.268422393,117441.771514517,122209.274606641,126976.777698766,131744.28079089,136511.783883014,141279.286975138,146046.790067262,150814.293159386,155581.79625151,160349.299343634,165116.802435758,169884.305527882,174651.808620006,179419.31171213,184186.814804254,188954.317896378,193721.820988503,198489.324080627,203256.827172751,208024.330264875,212791.833356999,217559.336449123,222326.839541247,227094.342633371,231861.845725495,236629.348817619,241396.851909743,246164.355001867,250931.858093991,255699.361186116,260466.86427824,265234.367370364,270001.870462488,274769.373554612,279536.876646736,284304.37973886,289071.882830984,293839.385923108,298606.889015232,303374.392107356,308141.89519948,312909.398291604,317676.901383728,322444.404475853,327211.907567977,331979.410660101,336746.913752225,341514.416844349,346281.919936473,351049.423028597,355816.926120721,360584.429212845,365351.932304969,370119.435397093,374886.938489217,379654.441581341,384421.944673466,389189.44776559,393956.950857714,398724.453949838,403491.957041962,408259.460134086,413026.96322621,417794.466318334,422561.969410458,427329.472502582,432096.975594706,436864.47868683,441631.981778954,446399.484871079,451166.987963203,455934.491055327,460701.994147451,465469.497239575,470237.000331699],[-24254.1584974225,-19486.6554052983,-14719.1523131744,-9951.64922105032,-5184.14612892619,-416.643036802066,4350.86005532183,9118.36314744595,13885.8662395701,18653.3693316942,23420.8724238183,28188.3755159422,32955.8786080664,37723.3817001905,42490.8847923146,47258.3878844385,52025.8909765626,56793.3940686868,61560.8971608109,66328.400252935,71095.9033450589,75863.406437183,80630.9095293072,85398.4126214313,90165.9157135552,94933.4188056793,99700.9218978034,104468.424989928,109235.928082052,114003.431174176,118770.9342663,123538.437358424,128305.940450548,133073.443542672,137840.946634796,142608.44972692,147375.952819044,152143.455911168,156910.959003292,161678.462095416,166445.965187541,171213.468279664,175980.971371789,180748.474463913,185515.977556037,190283.480648161,195050.983740285,199818.486832409,204585.989924533,209353.493016657,214120.996108781,218888.499200905,223656.002293029,228423.505385153,233191.008477278,237958.511569401,242726.014661526,247493.51775365,252261.020845774,257028.523937898,261796.027030022,266563.530122146,271331.03321427,276098.536306394,280866.039398518,285633.542490642,290401.045582766,295168.548674891,299936.051767014,304703.554859139,309471.057951263,314238.561043387,319006.064135511,323773.567227635,328541.070319759,333308.573411883,338076.076504007,342843.579596131,347611.082688255,352378.585780379,357146.088872503,361913.591964628,366681.095056752,371448.598148876,376216.101241,380983.604333124,385751.107425248,390518.610517372,395286.113609496,400053.61670162,404821.119793744,409588.622885868,414356.125977992,419123.629070116,423891.13216224,428658.635254364,433426.138346489,438193.641438613,442961.144530737,447728.647622861,452496.150714985,457263.653807109,462031.156899233,466798.659991357,471566.163083481,476333.666175605,481101.169267729],[-13389.989561392,-8622.48646926787,-3854.98337714397,912.519714980153,5680.02280710428,10447.5258992284,15215.0289913523,19982.5320834764,24750.0351756006,29517.5382677247,34285.0413598488,39052.5444519727,43820.0475440968,48587.550636221,53355.0537283451,58122.556820469,62890.0599125931,67657.5630047172,72425.0660968414,77192.5691889655,81960.0722810894,86727.5753732135,91495.0784653376,96262.5815574618,101030.084649586,105797.58774171,110565.090833834,115332.593925958,120100.097018082,124867.600110206,129635.10320233,134402.606294454,139170.109386578,143937.612478702,148705.115570826,153472.618662951,158240.121755075,163007.624847199,167775.127939323,172542.631031447,177310.134123571,182077.637215695,186845.140307819,191612.643399943,196380.146492067,201147.649584191,205915.152676315,210682.655768439,215450.158860564,220217.661952688,224985.165044812,229752.668136936,234520.17122906,239287.674321184,244055.177413308,248822.680505432,253590.183597556,258357.68668968,263125.189781804,267892.692873928,272660.195966052,277427.699058176,282195.202150301,286962.705242425,291730.208334549,296497.711426673,301265.214518797,306032.717610921,310800.220703045,315567.723795169,320335.226887293,325102.729979417,329870.233071541,334637.736163665,339405.239255789,344172.742347914,348940.245440037,353707.748532162,358475.251624286,363242.75471641,368010.257808534,372777.760900658,377545.263992782,382312.767084906,387080.27017703,391847.773269154,396615.276361278,401382.779453402,406150.282545527,410917.785637651,415685.288729775,420452.791821899,425220.294914023,429987.798006147,434755.301098271,439522.804190395,444290.307282519,449057.810374643,453825.313466767,458592.816558891,463360.319651015,468127.822743139,472895.325835264,477662.828927387,482430.332019512,487197.835111636,491965.33820376],[-2525.82062536152,2241.68246676261,7009.1855588865,11776.6886510106,16544.1917431348,21311.6948352589,26079.1979273828,30846.7010195069,35614.204111631,40381.7072037552,45149.2102958793,49916.7133880032,54684.2164801273,59451.7195722514,64219.2226643756,68986.7257564995,73754.2288486236,78521.7319407477,83289.2350328718,88056.738124996,92824.2412171199,97591.744309244,102359.247401368,107126.750493492,111894.253585616,116661.75667774,121429.259769864,126196.762861989,130964.265954113,135731.769046237,140499.272138361,145266.775230485,150034.278322609,154801.781414733,159569.284506857,164336.787598981,169104.290691105,173871.793783229,178639.296875353,183406.799967477,188174.303059601,192941.806151725,197709.309243849,202476.812335974,207244.315428098,212011.818520222,216779.321612346,221546.82470447,226314.327796594,231081.830888718,235849.333980842,240616.837072966,245384.34016509,250151.843257214,254919.346349339,259686.849441462,264454.352533587,269221.855625711,273989.358717835,278756.861809959,283524.364902083,288291.867994207,293059.371086331,297826.874178455,302594.377270579,307361.880362703,312129.383454827,316896.886546951,321664.389639075,326431.8927312,331199.395823324,335966.898915448,340734.402007572,345501.905099696,350269.40819182,355036.911283944,359804.414376068,364571.917468192,369339.420560316,374106.92365244,378874.426744564,383641.929836689,388409.432928812,393176.936020937,397944.439113061,402711.942205185,407479.445297309,412246.948389433,417014.451481557,421781.954573681,426549.457665805,431316.960757929,436084.463850053,440851.966942177,445619.470034301,450386.973126425,455154.47621855,459921.979310674,464689.482402798,469456.985494922,474224.488587046,478991.99167917,483759.494771294,488526.997863418,493294.500955542,498062.004047666,502829.50713979],[8338.34831066919,13105.8514027933,17873.3544949172,22640.8575870413,27408.3606791655,32175.8637712896,36943.3668634135,41710.8699555376,46478.3730476617,51245.8761397859,56013.37923191,60780.8823240339,65548.385416158,70315.8885082821,75083.3916004063,79850.8946925302,84618.3977846543,89385.9008767784,94153.4039689025,98920.9070610267,103688.410153151,108455.913245275,113223.416337399,117990.919429523,122758.422521647,127525.925613771,132293.428705895,137060.931798019,141828.434890143,146595.937982267,151363.441074391,156130.944166515,160898.44725864,165665.950350764,170433.453442888,175200.956535012,179968.459627136,184735.96271926,189503.465811384,194270.968903508,199038.471995632,203805.975087756,208573.47817988,213340.981272004,218108.484364128,222875.987456253,227643.490548376,232410.993640501,237178.496732625,241945.999824749,246713.502916873,251481.006008997,256248.509101121,261016.012193245,265783.515285369,270551.018377493,275318.521469617,280086.024561741,284853.527653866,289621.030745989,294388.533838114,299156.036930238,303923.540022362,308691.043114486,313458.54620661,318226.049298734,322993.552390858,327761.055482982,332528.558575106,337296.06166723,342063.564759354,346831.067851478,351598.570943603,356366.074035726,361133.577127851,365901.080219975,370668.583312099,375436.086404223,380203.589496347,384971.092588471,389738.595680595,394506.098772719,399273.601864843,404041.104956967,408808.608049091,413576.111141215,418343.614233339,423111.117325464,427878.620417588,432646.123509712,437413.626601836,442181.12969396,446948.632786084,451716.135878208,456483.638970332,461251.142062456,466018.64515458,470786.148246704,475553.651338828,480321.154430953,485088.657523077,489856.160615201,494623.663707325,499391.166799449,504158.669891573,508926.172983697,513693.676075821],[19202.5172466997,23970.0203388238,28737.5234309477,33505.0265230718,38272.5296151959,43040.0327073201,47807.535799444,52575.0388915681,57342.5419836922,62110.0450758163,66877.5481679405,71645.0512600644,76412.5543521885,81180.0574443126,85947.5605364367,90715.0636285606,95482.5667206848,100250.069812809,105017.572904933,109785.075997057,114552.579089181,119320.082181305,124087.585273429,128855.088365553,133622.591457677,138390.094549801,143157.597641926,147925.10073405,152692.603826174,157460.106918298,162227.610010422,166995.113102546,171762.61619467,176530.119286794,181297.622378918,186065.125471042,190832.628563166,195600.13165529,200367.634747414,205135.137839539,209902.640931663,214670.144023787,219437.647115911,224205.150208035,228972.653300159,233740.156392283,238507.659484407,243275.162576531,248042.665668655,252810.168760779,257577.671852903,262345.174945027,267112.678037151,271880.181129276,276647.6842214,281415.187313524,286182.690405648,290950.193497772,295717.696589896,300485.19968202,305252.702774144,310020.205866268,314787.708958392,319555.212050516,324322.71514264,329090.218234764,333857.721326889,338625.224419013,343392.727511137,348160.230603261,352927.733695385,357695.236787509,362462.739879633,367230.242971757,371997.746063881,376765.249156005,381532.752248129,386300.255340253,391067.758432377,395835.261524501,400602.764616626,405370.26770875,410137.770800874,414905.273892998,419672.776985122,424440.280077246,429207.78316937,433975.286261494,438742.789353618,443510.292445742,448277.795537866,453045.29862999,457812.801722114,462580.304814239,467347.807906362,472115.310998487,476882.814090611,481650.317182735,486417.820274859,491185.323366983,495952.826459107,500720.329551231,505487.832643355,510255.335735479,515022.838827603,519790.341919727,524557.845011852],[30066.6861827304,34834.1892748545,39601.6923669784,44369.1954591025,49136.6985512266,53904.2016433508,58671.7047354747,63439.2078275988,68206.7109197229,72974.214011847,77741.7171039712,82509.2201960951,87276.7232882192,92044.2263803433,96811.7294724674,101579.232564591,106346.735656715,111114.23874884,115881.741840964,120649.244933088,125416.748025212,130184.251117336,134951.75420946,139719.257301584,144486.760393708,149254.263485832,154021.766577956,158789.26967008,163556.772762205,168324.275854328,173091.778946453,177859.282038577,182626.785130701,187394.288222825,192161.791314949,196929.294407073,201696.797499197,206464.300591321,211231.803683445,215999.306775569,220766.809867693,225534.312959817,230301.816051941,235069.319144065,239836.82223619,244604.325328314,249371.828420438,254139.331512562,258906.834604686,263674.33769681,268441.840788934,273209.343881058,277976.846973182,282744.350065306,287511.85315743,292279.356249554,297046.859341678,301814.362433803,306581.865525927,311349.368618051,316116.871710175,320884.374802299,325651.877894423,330419.380986547,335186.884078671,339954.387170795,344721.890262919,349489.393355043,354256.896447167,359024.399539291,363791.902631416,368559.40572354,373326.908815664,378094.411907788,382861.914999912,387629.418092036,392396.92118416,397164.424276284,401931.927368408,406699.430460532,411466.933552656,416234.43664478,421001.939736904,425769.442829028,430536.945921153,435304.449013276,440071.952105401,444839.455197525,449606.958289649,454374.461381773,459141.964473897,463909.467566021,468676.970658145,473444.473750269,478211.976842393,482979.479934517,487746.983026641,492514.486118766,497281.98921089,502049.492303014,506816.995395138,511584.498487262,516352.001579386,521119.50467151,525887.007763634,530654.510855758,535422.013947882],[40930.8551187608,45698.358210885,50465.8613030089,55233.364395133,60000.8674872571,64768.3705793812,69535.8736715051,74303.3767636293,79070.8798557534,83838.3829478775,88605.8860400016,93373.3891321255,98140.8922242497,102908.395316374,107675.898408498,112443.401500622,117210.904592746,121978.40768487,126745.910776994,131513.413869118,136280.916961242,141048.420053366,145815.92314549,150583.426237615,155350.929329738,160118.432421863,164885.935513987,169653.438606111,174420.941698235,179188.444790359,183955.947882483,188723.450974607,193490.954066731,198258.457158855,203025.960250979,207793.463343103,212560.966435228,217328.469527352,222095.972619476,226863.4757116,231630.978803724,236398.481895848,241165.984987972,245933.488080096,250700.99117222,255468.494264344,260235.997356468,265003.500448592,269771.003540716,274538.50663284,279306.009724964,284073.512817089,288841.015909213,293608.519001337,298376.022093461,303143.525185585,307911.028277709,312678.531369833,317446.034461957,322213.537554081,326981.040646205,331748.543738329,336516.046830453,341283.549922578,346051.053014701,350818.556106826,355586.05919895,360353.562291074,365121.065383198,369888.568475322,374656.071567446,379423.57465957,384191.077751694,388958.580843818,393726.083935942,398493.587028066,403261.09012019,408028.593212314,412796.096304439,417563.599396563,422331.102488687,427098.605580811,431866.108672935,436633.611765059,441401.114857183,446168.617949307,450936.121041431,455703.624133555,460471.127225679,465238.630317803,470006.133409928,474773.636502051,479541.139594176,484308.6426863,489076.145778424,493843.648870548,498611.151962672,503378.655054796,508146.15814692,512913.661239044,517681.164331168,522448.667423292,527216.170515416,531983.67360754,536751.176699664,541518.679791789,546286.182883913],[51795.0240547913,56562.5271469154,61330.0302390393,66097.5333311635,70865.0364232876,75632.5395154117,80400.0426075356,85167.5456996597,89935.0487917839,94702.551883908,99470.0549760321,104237.558068156,109005.06116028,113772.564252404,118540.067344528,123307.570436652,128075.073528776,132842.576620901,137610.079713025,142377.582805149,147145.085897273,151912.588989397,156680.092081521,161447.595173645,166215.098265769,170982.601357893,175750.104450017,180517.607542141,185285.110634265,190052.613726389,194820.116818513,199587.619910638,204355.123002762,209122.626094886,213890.12918701,218657.632279134,223425.135371258,228192.638463382,232960.141555506,237727.64464763,242495.147739754,247262.650831878,252030.153924002,256797.657016126,261565.160108251,266332.663200375,271100.166292499,275867.669384623,280635.172476747,285402.675568871,290170.178660995,294937.681753119,299705.184845243,304472.687937367,309240.191029491,314007.694121615,318775.197213739,323542.700305864,328310.203397988,333077.706490112,337845.209582236,342612.71267436,347380.215766484,352147.718858608,356915.221950732,361682.725042856,366450.22813498,371217.731227104,375985.234319228,380752.737411352,385520.240503476,390287.743595601,395055.246687725,399822.749779849,404590.252871973,409357.755964097,414125.259056221,418892.762148345,423660.265240469,428427.768332593,433195.271424717,437962.774516841,442730.277608965,447497.780701089,452265.283793214,457032.786885337,461800.289977462,466567.793069586,471335.29616171,476102.799253834,480870.302345958,485637.805438082,490405.308530206,495172.81162233,499940.314714454,504707.817806578,509475.320898702,514242.823990826,519010.327082951,523777.830175075,528545.333267199,533312.836359323,538080.339451447,542847.842543571,547615.345635695,552382.848727819,557150.351819943],[62659.1929908218,67426.6960829459,72194.1991750698,76961.7022671939,81729.2053593181,86496.7084514422,91264.2115435661,96031.7146356902,100799.217727814,105566.720819938,110334.223912063,115101.727004186,119869.230096311,124636.733188435,129404.236280559,134171.739372683,138939.242464807,143706.745556931,148474.248649055,153241.751741179,158009.254833303,162776.757925427,167544.261017551,172311.764109676,177079.267201799,181846.770293924,186614.273386048,191381.776478172,196149.279570296,200916.78266242,205684.285754544,210451.788846668,215219.291938792,219986.795030916,224754.29812304,229521.801215164,234289.304307288,239056.807399413,243824.310491537,248591.813583661,253359.316675785,258126.819767909,262894.322860033,267661.825952157,272429.329044281,277196.832136405,281964.335228529,286731.838320653,291499.341412777,296266.844504901,301034.347597025,305801.850689149,310569.353781274,315336.856873398,320104.359965522,324871.863057646,329639.36614977,334406.869241894,339174.372334018,343941.875426142,348709.378518266,353476.88161039,358244.384702514,363011.887794639,367779.390886762,372546.893978887,377314.397071011,382081.900163135,386849.403255259,391616.906347383,396384.409439507,401151.912531631,405919.415623755,410686.918715879,415454.421808003,420221.924900127,424989.427992251,429756.931084375,434524.434176499,439291.937268624,444059.440360748,448826.943452872,453594.446544996,458361.94963712,463129.452729244,467896.955821368,472664.458913492,477431.962005616,482199.46509774,486966.968189864,491734.471281989,496501.974374112,501269.477466237,506036.980558361,510804.483650485,515571.986742609,520339.489834733,525106.992926857,529874.496018981,534641.999111105,539409.502203229,544177.005295353,548944.508387477,553712.011479601,558479.514571725,563247.01766385,568014.520755974],[73523.3619268523,78290.8650189764,83058.3681111003,87825.8712032244,92593.3742953485,97360.8773874727,102128.380479597,106895.883571721,111663.386663845,116430.889755969,121198.392848093,125965.895940217,130733.399032341,135500.902124465,140268.405216589,145035.908308713,149803.411400837,154570.914492961,159338.417585086,164105.92067721,168873.423769334,173640.926861458,178408.429953582,183175.933045706,187943.43613783,192710.939229954,197478.442322078,202245.945414202,207013.448506326,211780.95159845,216548.454690574,221315.957782699,226083.460874823,230850.963966947,235618.467059071,240385.970151195,245153.473243319,249920.976335443,254688.479427567,259455.982519691,264223.485611815,268990.988703939,273758.491796063,278525.994888187,283293.497980312,288061.001072436,292828.50416456,297596.007256684,302363.510348808,307131.013440932,311898.516533056,316666.01962518,321433.522717304,326201.025809428,330968.528901552,335736.031993676,340503.5350858,345271.038177924,350038.541270049,354806.044362172,359573.547454297,364341.050546421,369108.553638545,373876.056730669,378643.559822793,383411.062914917,388178.566007041,392946.069099165,397713.572191289,402481.075283413,407248.578375537,412016.081467662,416783.584559786,421551.08765191,426318.590744034,431086.093836158,435853.596928282,440621.100020406,445388.60311253,450156.106204654,454923.609296778,459691.112388902,464458.615481026,469226.11857315,473993.621665274,478761.124757398,483528.627849523,488296.130941647,493063.634033771,497831.137125895,502598.640218019,507366.143310143,512133.646402267,516901.149494391,521668.652586515,526436.155678639,531203.658770763,535971.161862887,540738.664955012,545506.168047136,550273.67113926,555041.174231384,559808.677323508,564576.180415632,569343.683507756,574111.18659988,578878.689692004],[84387.5308628827,89155.0339550069,93922.5370471308,98690.0401392549,103457.543231379,108225.046323503,112992.549415627,117760.052507751,122527.555599875,127295.058691999,132062.561784124,136830.064876247,141597.567968372,146365.071060496,151132.57415262,155900.077244744,160667.580336868,165435.083428992,170202.586521116,174970.08961324,179737.592705364,184505.095797488,189272.598889612,194040.101981736,198807.60507386,203575.108165985,208342.611258109,213110.114350233,217877.617442357,222645.120534481,227412.623626605,232180.126718729,236947.629810853,241715.132902977,246482.635995101,251250.139087225,256017.642179349,260785.145271474,265552.648363597,270320.151455722,275087.654547846,279855.15763997,284622.660732094,289390.163824218,294157.666916342,298925.170008466,303692.67310059,308460.176192714,313227.679284838,317995.182376962,322762.685469086,327530.18856121,332297.691653335,337065.194745459,341832.697837583,346600.200929707,351367.704021831,356135.207113955,360902.710206079,365670.213298203,370437.716390327,375205.219482451,379972.722574575,384740.225666699,389507.728758823,394275.231850947,399042.734943072,403810.238035196,408577.74112732,413345.244219444,418112.747311568,422880.250403692,427647.753495816,432415.25658794,437182.759680064,441950.262772188,446717.765864312,451485.268956436,456252.77204856,461020.275140685,465787.778232809,470555.281324933,475322.784417057,480090.287509181,484857.790601305,489625.293693429,494392.796785553,499160.299877677,503927.802969801,508695.306061925,513462.809154049,518230.312246173,522997.815338298,527765.318430422,532532.821522546,537300.32461467,542067.827706794,546835.330798918,551602.833891042,556370.336983166,561137.84007529,565905.343167414,570672.846259538,575440.349351662,580207.852443786,584975.35553591,589742.858628035],[95251.6997989132,100019.202891037,104786.705983161,109554.209075285,114321.712167409,119089.215259534,123856.718351658,128624.221443782,133391.724535906,138159.22762803,142926.730720154,147694.233812278,152461.736904402,157229.239996526,161996.74308865,166764.246180774,171531.749272898,176299.252365022,181066.755457147,185834.258549271,190601.761641395,195369.264733519,200136.767825643,204904.270917767,209671.774009891,214439.277102015,219206.780194139,223974.283286263,228741.786378387,233509.289470511,238276.792562635,243044.29565476,247811.798746884,252579.301839008,257346.804931132,262114.308023256,266881.81111538,271649.314207504,276416.817299628,281184.320391752,285951.823483876,290719.326576,295486.829668124,300254.332760248,305021.835852372,309789.338944497,314556.84203662,319324.345128745,324091.848220869,328859.351312993,333626.854405117,338394.357497241,343161.860589365,347929.363681489,352696.866773613,357464.369865737,362231.872957861,366999.376049985,371766.87914211,376534.382234233,381301.885326358,386069.388418482,390836.891510606,395604.39460273,400371.897694854,405139.400786978,409906.903879102,414674.406971226,419441.91006335,424209.413155474,428976.916247598,433744.419339722,438511.922431847,443279.425523971,448046.928616095,452814.431708219,457581.934800343,462349.437892467,467116.940984591,471884.444076715,476651.947168839,481419.450260963,486186.953353087,490954.456445211,495721.959537335,500489.462629459,505256.965721583,510024.468813708,514791.971905832,519559.474997956,524326.97809008,529094.481182204,533861.984274328,538629.487366452,543396.990458576,548164.4935507,552931.996642824,557699.499734948,562467.002827073,567234.505919197,572002.009011321,576769.512103445,581537.015195569,586304.518287693,591072.021379817,595839.524471941,600607.027564065],[106115.868734944,110883.371827068,115650.874919192,120418.378011316,125185.88110344,129953.384195564,134720.887287688,139488.390379812,144255.893471936,149023.39656406,153790.899656184,158558.402748308,163325.905840433,168093.408932557,172860.912024681,177628.415116805,182395.918208929,187163.421301053,191930.924393177,196698.427485301,201465.930577425,206233.433669549,211000.936761673,215768.439853797,220535.942945921,225303.446038045,230070.94913017,234838.452222294,239605.955314418,244373.458406542,249140.961498666,253908.46459079,258675.967682914,263443.470775038,268210.973867162,272978.476959286,277745.98005141,282513.483143535,287280.986235658,292048.489327783,296815.992419907,301583.495512031,306350.998604155,311118.501696279,315886.004788403,320653.507880527,325421.010972651,330188.514064775,334956.017156899,339723.520249023,344491.023341147,349258.526433271,354026.029525395,358793.53261752,363561.035709644,368328.538801768,373096.041893892,377863.544986016,382631.04807814,387398.551170264,392166.054262388,396933.557354512,401701.060446636,406468.56353876,411236.066630884,416003.569723008,420771.072815133,425538.575907257,430306.078999381,435073.582091505,439841.085183629,444608.588275753,449376.091367877,454143.594460001,458911.097552125,463678.600644249,468446.103736373,473213.606828497,477981.109920621,482748.613012746,487516.11610487,492283.619196994,497051.122289118,501818.625381242,506586.128473366,511353.63156549,516121.134657614,520888.637749738,525656.140841862,530423.643933986,535191.14702611,539958.650118234,544726.153210358,549493.656302483,554261.159394606,559028.662486731,563796.165578855,568563.668670979,573331.171763103,578098.674855227,582866.177947351,587633.681039475,592401.184131599,597168.687223723,601936.190315847,606703.693407971,611471.196500096]],"mode":"markers","marker":{"size":5,"opacity":0.25},"showlegend":false,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"surface","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Gr_Liv_Area"},"yaxis":{"title":"Year_Built"},"zaxis":{"title":"Sale_Price"}},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"x":[1329,2110,1629,1604,1338,1280,1804,1655,1187,1341,3279,1752,864,2073,1844,1674,1078,1056,864,987,1092,1069,1456,836,1456,2334,1704,1940,1544,1541,1698,1535,1358,2696,1752,1370,1626,1324,1269,1960,1733,2035,2599,2475,1720,2622,1839,3238,1595,1547,1566,1947,2084,1659,2110,923,1845,918,752,1744,1097,1564,1012,1902,894,900,1040,1494,2225,1488,1200,1200,1200,1236,1478,1416,1080,1418,788,1226,1479,1492,1829,2495,1714,1381,1645,1232,1328,1225,1209,1775,1152,1054,1728,1078,1556,858,1306,1063,1520,1268,1128,2274,2207,1604,1480,1143,1700,1314,1194,1188,1580,1337,1064,972,988,1057,985,827,1458,1287,2978,1224,1246,1385,1116,1175,1395,1844,1140,936,804,1316,1251,832,720,1566,2268,2256,1236,2290,1470,1612,2068,1132,1196,1453,1416,1040,1536,1068,1710,1962,1560,1324,816,1092,1812,2403,1224,1392,1884,1680,1020,1832,1039,912,1060,892,1352,864,2260,756,1067,1524,1981,1610,835,1074,1144,1531,1172,1212,1508,930,1732,1949,1694,1208,1226,1222,3222,1445,1052,965,1692,1682,1026,1392,894,876,1978,1829,1661,848,848,1484,1414,992,1664,1196,1120,1096,1117,960,924,1526,864,1691,856,1666,2133,2177,1652,1191,1801,1154,540,1107,1128,1178,952,1916,1285,1560,2048,1687,1346,1444,1968,1894,1430,1824,945,1112,1092,1092,874,1188,833,2432,1274,1479,1803,882,1434,2704,1608,2283,1746,1659,1478,1734,1382,1718,1636,1571,1470,1516,1593,1481,1167,1983,1442,1360,2234,2046,1530,1934,1586,1411,1602,2050,1671,2673,1472,1707,1601,1370,1868,1884,1935,1811,1621,1193,1350,2119,1792,1026,1180,1050,864,864,1365,1302,987,987,958,1548,1456,836,892,1120,1718,2772,3140,2402,1652,2690,2184,2020,2296,2674,1782,2520,1717,1743,1713,1531,1808,2224,1836,1629,2392,2452,2400,1606,1306,1306,1358,1314,2492,2200,1884,1456,1712,1324,1405,1626,1490,1484,1560,1555,1220,1374,1630,1419,1594,1489,1342,1314,2256,2004,2054,1800,1514,2312,1675,2060,2365,2794,2687,2612,2063,2232,2448,1850,1468,1696,1578,1702,1432,1971,2490,1590,1218,1436,1314,1402,1766,1448,2007,1795,1550,1836,1662,2094,1221,1553,1653,1218,1141,1158,1812,1512,1200,1114,1114,2122,1844,1730,1217,1332,1540,1400,1882,841,980,980,864,864,1020,864,912,2014,3005,1224,1224,1726,1256,1471,1512,1739,1694,1740,2499,1620,1556,1442,1489,2090,2640,1724,1336,1216,2288,1680,1665,864,1568,2061,1320,1342,894,864,864,1362,1728,1776,1516,1292,1154,1445,1041,1576,960,708,1203,1691,1644,1668,1113,1584,1567,2142,1392,1738,1144,1329,988,1215,1382,1297,1866,1112,1005,793,1031,1699,1200,792,1656,1078,2377,1690,599,1374,725,2544,1380,1040,951,1306,1478,1142,1268,1040,1133,1040,1904,1041,1339,732,1183,1148,1461,1495,1806,941,1224,1230,1944,1131,1306,1701,1389,1447,861,612,968,886,792,1452,1510,1284,2138,2640,2007,1288,1742,816,1022,1521,720,797,1576,1548,1654,1324,1176,1412,1142,904,1301,1539,1573,800,995,1582,1072,2134,1768,1826,1944,2229,2128,1930,1208,1427,1864,1666,892,1403,1200,1200,1152,904,1369,1112,1464,899,1034,1092,1774,2071,660,1788,1473,861,1867,1383,1689,1073,1276,672,1716,1258,1061,1338,1775,1879,2020,2016,1535,1535,2240,1229,2787,2787,2787,1680,1718,1720,1468,1768,1800,1604,1290,1254,1498,1422,1644,1759,1040,1764,1463,1097,990,1779,1431,1660,1573,1840,1430,1444,1040,907,914,1040,1268,864,894,768,768,1788,1872,2153,1725,1513,1417,2034,1212,1630,848,848,1602,1728,1500,1476,1396,1126,1486,816,1922,1426,1149,1125,1072,876,1368,1529,944,1678,960,1196,1604,438,1489,3082,1242,1135,1913,1477,1228,2080,1494,1308,1273,964,1343,2480,1564,1561,1523,1906,1032,1229,1229,1982,1680,2168,572,2052,2149,1961,926,1217,1595,1344,2036,2036,1641,1466,1412,1479,1296,2014,1838,1978,1008,1771,1204,630,630,1344,1092,796,1091,1110,833,883,1362,1287,1567,1632,1414,2117,1604,1638,1636,1446,1682,1337,1280,1604,1633,1658,1895,1709,1337,2504,1474,1488,1688,1422,1260,2064,1782,2872,1211,1308,1523,1964,1792,1054,936,864,1337,987,987,987,987,987,987,1302,1069,1456,1932,2332,2713,1710,1950,2748,2790,2331,2088,2332,2470,2668,2046,2649,1866,1702,1367,1518,1800,1342,1342,1626,1626,1358,1455,1576,1504,1266,1246,1515,1166,1456,1986,1358,1792,1892,1490,1414,2322,1651,2199,2630,2172,2006,2125,2501,2113,2418,2127,1987,1580,1933,1574,1578,1506,1563,1428,1874,1460,1372,1768,1992,1958,1665,1218,1728,1080,1696,1114,1162,1609,1680,1677,1737,1294,1710,1617,1199,984,864,890,864,912,1641,2683,2786,1250,1245,1200,1392,1549,1310,1419,1709,1252,1404,1789,1586,2393,1288,1239,1719,1232,2944,1671,1427,1740,1258,912,1728,1728,1656,1670,2715,1876,1632,1014,907,1128,1165,1136,1092,1265,1350,1114,1118,720,729,1661,1820,1144,1537,1988,1098,1144,1176,1440,1261,1570,1196,1392,1080,1104,882,1152,1790,773,1764,1824,1159,1558,1436,1044,1253,2069,876,1048,1507,1256,1027,1320,984,832,1800,825,1796,1611,1117,1133,1323,1360,2792,672,1456,1594,1656,899,1080,789,1122,1499,407,928,901,1588,1627,1450,1017,2058,1540,1378,1484,1111,1086,2495,1795,882,1093,1143,1668,935,1738,784,1210,1290,1672,949,1158,1497,1342,1216,896,1136,808,1573,1902,1774,1362,520,1285,1848,1820,1984,1609,768,1308,1040,1236,825,1198,759,1344,1469,1054,1211,1271,1588,1075,1040,1096,904,992,894,1034,1073,1126,1258,1140,1228,960,1188,1383,1252,1601,672,1350,904,2022,1524,1363,1663,1357,1094,1518,2108,864,1367,1347,1164,1096,1111,2329,2814,1626,2200,1356,1615,2276,1766,2097,1511,1643,1688,990,1099,990,1418,1652,1724,1479,1494,1792,1823,1786,938,985,1174,1026,1076,1558,864,780,1795,2031,1865,2161,1852,2031,1768,1640,1764,1908,848,848,1493,1838,1536,1710,1445,1436,1582,1234,1564,1361,1456,848,848,848,796,1092,1256,1033,1127,996,1181,1656,1117,1398,1132,3820,5642,1072,1152,1053,1137,930,1470,1204,1292,864,1716,1482,1694,1424,1920,2555,1680,1264,790,1512,1639,1603,1502,1660,1938,1091,1873,3447,1954,2161,1898,1640,1556,1090,796,816,778,1656,1955,733,1361,1049,894,864,1648,1646,1689,1820,1279,1872,1689,1786,1501,2898,1537,1646,1780,1442,1394,1612,1495,1651,1256,1509,1440,2262,1964,1344,1344,1092,1189,1304,1475,988,1160,1092,630,816,923,816,816,1750,889,1968,1836,1277,2223,2217,1733,1572,1470,1384,1652,1694,1714,1553,1253,2299,1187,1482,1642,1128,1088,2090,1321,2541,1424,1612,1419,2042,1440,1284,1868,1664,1930,1969,2030,1725,1620,1220,1484,1935,1324,1877,981,1479,1422,914,872,858,864,1337,1337,1092,1218,1218,1302,1365,1548,1055,988,1816,1828,1694,1734,2656,2550,2172,2552,2643,1634,1976,2758,2290,2152,2473,2100,2161,2468,2385,1818,1614,1721,1828,1362,1302,1302,1362,1554,1554,1370,1577,1869,1324,1536,1484,1458,1495,1746,1456,1340,1412,1504,1456,1258,1258,1402,1589,1266,1119,1374,1959,1525,1720,1394,1948,1690,1995,1647,1430,1320,1644,4476,2551,2285,2633,3078,2582,2385,4316,2013,2398,2520,2531,3228,2538,1369,1542,1905,1464,1534,1636,1795,1528,1726,1689,1588,1538,1506,1694,1977,1338,1588,1880,1656,1761,1584,1685,2466,1100,1143,1094,1486,1721,1820,1349,1494,1266,884,970,999,1120,1040,988,902,2167,1701,1055,2872,1565,1352,1550,1241,1250,1501,1512,1573,1525,1102,1441,2048,2362,2362,1432,1437,1295,2497,1152,2411,1594,1680,1242,1052,1214,1344,1728,1224,1422,958,1065,912,882,964,894,1200,1042,1302,1374,1652,1327,1224,932,908,334,666,808,1977,1150,1920,1376,1644,1560,1280,1254,912,2380,1008,1053,1056,1442,1056,1144,1560,1040,1008,925,1360,1540,925,928,1647,1544,893,1728,1034,882,1534,691,1651,952,2080,924,1082,1846,988,1238,864,1134,1040,1170,1242,1377,1800,925,1812,960,1296,1022,967,1072,1174,1183,1141,960,1798,866,1772,1642,1472,2337,1650,1358,2454,2291,1616,1559,2554,1248,968,1382,1060,1435,1635,1274,1232,1218,884,1322,1426,1281,1513,854,986,2264,1824,1376,1396,1344,2526,1173,1818,1108,2294,1355,1375,1952,1315,1111,1196,1889,840,1484,2267,3086,1134,1282,999,1452,1029,1020,1040,913,894,948,868,943,955,894,1285,2654,1416,1302,1299,998,1824,1522,1630,1242,2422,2158,1626,864,1440,605,1038,1480,1362,1340,1822,1442,2243,2730,2127,2696,1651,2140,1494,1316,1651,1546,1500,1270,1314,2062,1873,1953,2087,1743,1022,1200,1097,990,1786,1873,1753,1690,1479,894,1009,1040,882,969,864,875,2000,2169,1673,1459,1729,1592,1668,848,1341,1928,1337,1476,1797,1422,1190,1330,1491,1214,960,1351,816,1044,1090,1408,5095,4676,1072,960,1152,948,1195,774,865,894,1346,768,864,1502,1422,1298,1768,1098,1436,1426,1461,1646,694,1250,1958,1226,2624,3194,1355,2727,2320,1839,1740,2259,1560,1488,1045,1696,2515,1517,1215,803,1601,816,1012,1558,845,1991,1073,1001,1625,1625,1409,1478,1026,1501,1502,2279,1564,1484,1571,1717,1756,1146,1922,1491,2486,1572,1776,1824,2482,1120,936,1040,1632,1622,1060,1142,1092,992,1092,630,1092,1062,1008,1356,1676,1432,796,768,1608,845,1178,816,816,974,887,1024,1797,1390,1851,2236,1671,1776,2462,1801,2212,2021,1169,1501,1204,1767,2798,2473,2868,2576,2945,2320,1056,1714,1826,2000,1621,2183,2263,1574,1872,1857,2784,1552,1083,2318,1875,1664,1309,1103,864,1419,1092,1365,987,1030,1218,1218,948,1092,987,1069,1387,900,1456,1980,2589,2596,1618,2076,1740,1868,1850,2376,2206,2098,2324,2389,2358,1944,1970,1792,1780,2728,1904,1364,1565,1368,1368,1666,1316,1492,1496,1863,1326,2373,1492,1364,1557,1456,1511,1414,1548,1248,1142,1567,1500,1838,1509,1414,1936,1664,1889,2322,2291,2392,1976,2234,3627,2855,1924,2263,2726,3500,2494,2799,1964,1670,2097,1660,1504,1278,1489,1939,1553,1576,1262,1266,1142,1400,1131,1158,1603,1398,1217,1320,1056,988,1212,984,909,925,1024,935,912,1236,941,2646,2417,2826,2520,2295,1624,1143,1200,1223,1200,1524,1452,1382,1080,1568,1494,1208,1235,1036,1226,1226,1842,1193,1920,2156,1416,2654,1790,1164,980,1051,1770,976,1052,1051,1141,1993,1050,864,1712,1565,1251,1440,1248,1008,1230,747,1252,1433,1624,1216,1578,1728,1584,1246,1235,2157,1128,3112,1008,1190,1144,1364,1236,943,1375,1008,1575,1056,884,2039,1384,2640,1312,1310,713,1073,715,720,1130,1595,1760,1214,2414,1466,1086,1146,1734,1194,864,816,1773,1472,2448,1521,1192,1040,1040,1040,1150,1348,999,1045,864,2014,1328,1668,1657,1416,1641,1428,1004,813,1951,1032,844,1750,864,960,1566,840,1928,1774,1768,2104,1440,1690,1762,1200,1248,960,1020,1577,1827,1118,1176,1344,1162,1015,912,1576,1103,816,960,1430,819,1376,754,984,1422,1921,1352,1032,879,1382,1296,1068,1064,1320,934,1059,1159,1400,1721,1040,1967,1920,1803,1779,872,960,1437,1830,1000,810,894,1350,1150,2009,3672,1488,1855,1609,1124,1456,1298,1911,1208,1220,1294,1614,1498,1962,1846,1590,1809,1614,1596,1915,1582,988,1388,914,1425,990,1494,1588,1749,1779,1861,1776,1541,954,1388,1282,971,864,894,864,1989,1755,1358,1787,1909,1654,2214,2049,1995,1836,848,1919,1390,1948,1700,1552,1336,1500,1456,1310,1466,1220,1012,980,1176,914,2314,1072,1072,1072,1709,1709,1709,1708,936,1338,1221,1414,2230,498,1273,1928,1595,1551,1340,1784,1510,1522,1636,1802,1465,1288,1717,1550,1517,1717,1180,1671,1609,1811,1647,2315,1336,1844,976,1285,672,951,1336,729,480,1396,936,1778,1646,1625,1664,1491,1210,1959,2519,1295,1650,1707,1137,1339,2514,1403,1800,1960,1368,1140,1304,1475,2521,874,1652,630,1092,1360,630,1092,1092,1092,1728,1728,1003,902,970,1389,2000],"y":[1958,1968,1997,1998,2001,1992,1999,1993,1992,1990,2003,1988,1951,1978,1977,2000,1971,1968,1971,1971,1971,1977,1975,1975,1978,2009,2007,2009,2009,2005,2005,2004,2009,2003,2005,2006,2003,2005,2004,2002,2004,2001,1999,1998,1996,1994,1998,1995,2005,2009,2008,2004,2004,2004,1994,1980,1992,1979,1984,1993,1984,1980,1920,1978,1965,1967,1963,1974,1992,2004,2004,2004,2004,2005,2009,1999,2003,2010,1980,1978,1976,2002,1967,1993,1988,1972,1971,1966,1963,1959,1966,1964,1964,1963,1962,1950,1949,1958,1940,1954,1955,1954,1966,1960,1970,1958,2003,1959,1959,1957,1959,1959,1959,1956,1952,1955,1958,1953,1920,1955,1948,1959,1967,1948,1959,1952,1962,1960,1963,1900,1910,1920,1940,1929,1938,1923,1928,1900,1890,1910,1957,1885,1922,1950,1922,1939,1940,1942,1948,1936,1930,1923,1921,1915,1912,1920,1963,1930,1900,1940,1917,1915,1907,1910,1875,1967,1965,1967,1968,1966,1969,1968,1996,1927,1950,1979,1978,1938,1920,1950,1956,1947,1954,2009,2009,1946,1985,1993,2008,2006,2009,2010,1990,1900,1971,1996,1997,1998,1977,1977,1976,1972,2003,2003,1998,2003,2004,2004,2004,1954,1965,1968,1948,1975,1976,1958,1941,1957,1914,1924,1939,1931,1941,1950,1994,1989,1959,1922,1941,1921,1920,1900,1896,1998,1977,2003,1976,1948,2008,2006,2009,2002,2004,1971,1973,1976,1970,1972,1971,1962,1984,1985,1991,1969,1994,1956,1974,1972,1997,2003,2006,2000,1998,1995,1998,1998,1998,1993,1993,1994,1992,1994,1992,1999,1990,1984,2008,2008,2005,1977,1979,1977,1977,1978,1978,1980,1980,1978,1978,1976,1976,2003,2009,2002,1975,1975,1974,1972,1974,1969,1970,1971,1970,1971,1970,1971,1972,1972,1976,1976,1976,1976,1967,1966,2006,2007,2008,2008,2006,2009,2008,2009,2008,2007,2004,2007,2006,2008,2004,2006,2008,2004,2004,2003,2003,2003,2003,2006,2005,2005,2007,2007,2004,2003,2008,2008,2002,2006,2003,2003,2005,2005,2005,2007,2005,2004,2004,2002,2004,2003,2003,2007,2000,2002,2000,2000,2000,1999,1999,1999,1999,1995,2000,1998,1994,1993,1994,1994,2008,2008,2008,2007,2006,2005,2005,2008,2009,2008,2009,2008,2009,2006,2008,2006,2006,2008,2006,2003,2004,2003,2003,2007,2006,2004,2004,2004,2003,2004,2003,1996,2005,1992,1980,1990,1994,1986,1981,1950,1962,1977,1961,1961,1965,1965,1962,1980,2004,2009,2009,2008,2008,1999,2000,1999,1977,1981,1976,1976,1968,1970,1968,1973,1967,1967,1969,1969,1977,1998,2001,1967,1967,1974,1971,1967,1960,1959,1959,1957,1956,1958,1964,1964,1966,1964,1959,1961,1955,1940,1950,1967,1953,1950,1950,1967,1966,1968,1968,1920,1956,1960,1959,1958,1955,1954,1958,1951,1955,1945,1952,1900,1950,1958,1916,1925,1915,1910,1940,1920,1890,1969,1963,1967,1958,1957,1960,1958,1949,1950,1950,1949,1950,1958,1958,1952,1959,1959,1949,1948,1964,1978,1926,1910,1910,1941,1910,1920,1946,1910,1920,1940,1910,1938,1923,1920,1910,1947,1898,1880,1900,1917,1882,1910,1910,1910,1920,1900,1923,1925,1930,1936,1937,1939,1924,1926,1924,1936,1935,1936,1925,1938,1925,1916,1915,1915,1915,1912,1922,1927,1925,1915,1902,1927,1923,1915,1987,1987,1978,1922,1925,1934,1963,1967,1978,1962,1961,1956,1947,1957,1968,1940,1955,1954,1956,1956,1958,1941,1949,1939,1990,1983,1993,1993,1995,1880,1979,1979,1979,1979,2000,2000,2000,2009,2007,2008,2008,2007,2007,2006,2007,2008,2005,2005,1989,1992,1996,1997,1998,1994,1994,1998,1999,2002,2002,2001,2001,2002,1978,1978,1979,1977,1977,1972,1972,1972,1972,2001,2001,2000,2002,1999,1997,1997,2001,2000,2003,2003,2007,2004,2004,2005,2007,1949,1964,1938,2003,1977,1960,1976,2005,1959,1950,1945,1952,1959,1956,1920,1941,1920,1940,1920,1935,1936,1928,1928,1918,1926,1942,1940,1960,1921,1921,1940,1941,1960,1949,1954,1980,1980,1980,1986,1988,1900,1925,2000,2003,2001,1977,1990,1991,1958,1965,2008,2008,2007,1988,1987,2001,2003,2006,2007,1968,1960,1998,1970,1970,1970,1970,1972,1993,1978,1985,1992,1993,1992,1977,1969,1958,1970,1997,1998,1996,1996,1997,1993,1992,1997,1998,1995,1994,1991,1989,2005,1952,1950,1988,1981,1983,1978,1979,1977,1976,1969,1976,1976,1974,1969,1969,1971,1998,1973,1973,1972,1970,1971,1971,1972,1977,1975,2008,2007,2008,2007,2007,2006,2005,2005,2007,2004,2003,2003,2003,2001,2008,2008,2005,2003,2007,2006,2006,2003,2003,2004,2003,2004,2005,2007,2007,2004,2005,2005,2003,2007,2000,2000,2004,2002,1999,1999,1997,1998,2000,1998,1996,1995,1995,1993,1994,1994,2007,2007,2006,2006,2008,2007,2008,2007,2006,2007,2005,2003,2005,2007,2007,2003,2004,2003,2003,2007,1995,1993,2001,1992,1991,1993,1993,1993,1963,1961,1968,1963,1961,1972,1990,1993,2006,2004,2005,2007,1999,2001,2001,1999,1999,1999,2001,1999,1998,1996,1995,1993,1984,1977,1976,1969,1968,1971,1965,1965,1965,1973,1971,1976,1974,1966,1956,1957,1963,1966,1965,1964,1965,1964,1961,1960,1949,1935,1955,1965,1961,1962,1966,1955,1963,1957,1959,1958,1958,1956,1957,1958,1956,1952,1953,1957,1953,1957,1957,1925,1945,1922,1968,1960,1960,1951,1950,1960,1959,1962,1948,1954,1954,1961,1954,1963,1964,1963,2008,1948,1910,1920,1940,1915,1910,1940,1910,1890,1948,1948,1946,1946,1957,1954,1949,1900,1920,1900,1917,1905,1928,1914,1926,1920,1890,1954,1956,1958,1928,1945,1930,1935,1924,1941,1900,1940,1924,1929,1937,1939,1920,1946,1929,1945,1930,1923,1931,1920,1927,1948,1923,1925,1910,1910,1930,1915,1925,1925,1955,1920,1912,1915,1906,1947,1968,1948,1959,1963,1965,1978,1966,1967,1967,1978,1967,1984,1969,1920,1966,1963,1956,1954,1960,1958,1940,1941,1970,1977,1979,1954,1954,1959,1953,1940,1935,1975,1900,1910,1950,1924,1941,1990,1995,1994,1993,2007,2007,2008,2008,1993,1995,1966,1997,1994,1995,1994,1997,2000,1998,1999,2002,2001,2000,2001,1975,1977,1978,1978,1975,1975,1972,1972,2002,2002,2000,2001,1999,1998,2003,2003,1999,1994,2003,2004,1997,1997,2002,2003,2004,2004,2004,2007,2007,2007,2005,2004,2004,2004,1910,1966,1965,1976,1976,1940,1972,2003,1977,1976,2005,1959,2008,2005,1955,1938,1947,1953,1954,1954,1923,1914,1912,1925,1925,1921,1930,1922,1915,1914,1930,1925,1936,1923,1931,1934,1937,1951,1935,1935,1939,1950,1956,1954,1980,1940,1922,1930,1940,1967,1958,1952,1895,1910,1935,1920,2007,2004,2002,1996,1977,1976,1991,1965,1986,1976,2006,2007,2007,2006,2006,2008,1989,1986,1986,1988,2003,2003,2005,1997,1997,2007,1997,1976,1976,1973,1968,1970,1972,1983,1984,1982,1982,1940,1984,1969,1900,1970,1973,1970,2003,1995,1997,1997,2000,1994,1999,1996,1995,1999,1992,1992,1993,1964,1986,1984,1990,2005,1969,2006,2007,2006,1981,1984,1984,1978,1979,1977,1976,1979,1969,1971,1971,1976,1976,1974,1971,1972,1970,1970,1971,1971,1971,2001,1997,1973,1973,1973,1970,1971,1976,1978,1966,2006,2007,2006,2007,2007,2006,2006,2007,2006,2006,2006,2005,2007,2007,2004,2007,2007,2004,2003,2007,2005,2005,2006,2005,2005,2005,2005,2006,2006,2006,2005,2007,2006,2005,2005,2006,2006,2006,2007,2007,2006,2007,2007,2007,2006,2006,2003,2007,2004,2004,2004,2006,2004,2003,2003,2000,2002,1999,2000,2003,1999,1996,1997,2000,2001,1998,1998,1998,1994,1996,1996,1995,1995,1992,1996,2007,2007,2006,2007,2006,2006,2006,2007,2007,2007,2006,2005,2005,2004,2006,2007,2007,2007,2006,2007,2007,2006,2004,2006,2006,2003,2006,1994,1993,2000,1998,1980,1983,1963,1962,1961,1968,1961,1967,1974,1975,1973,1992,2006,2006,2006,2006,2006,1999,2000,2000,2000,2004,1999,2003,1998,1980,1978,1976,1978,1981,1968,1970,1993,1976,1973,1963,1967,1958,1964,1964,1960,1960,1960,1958,1959,1961,1960,1966,1965,1964,1964,1959,1959,1962,1950,1940,1946,1946,1958,1964,1955,1948,1941,1942,1968,1966,1961,1958,1965,1956,1963,1958,1958,1954,1960,1958,1953,1953,1956,1955,1955,1955,1956,1953,1890,1949,1953,1940,1956,1895,1920,1963,1968,1969,1949,1948,1949,1950,1950,1950,1960,1959,1958,1960,1960,1961,1961,1962,1926,1927,1922,1920,1940,1900,1948,1900,1920,1900,1945,1910,1927,1925,1900,1910,1930,1879,1910,1926,1948,1890,1930,1956,1949,1925,1950,1923,1939,1939,1941,1939,1939,1930,1926,1920,1929,1926,1918,1919,1920,1915,1929,1916,1901,1931,1930,1963,1914,1937,1950,1958,1920,1916,1910,1930,1910,1937,1946,1940,1942,1963,1964,1961,1964,1966,1966,1966,1968,1971,1967,1966,1968,1977,1920,1918,1940,1954,1945,1971,1984,1953,1946,1954,1950,1954,1958,1977,1920,1984,1951,1920,1957,1984,1990,1990,1986,1991,2007,2007,2006,2006,2007,2007,2005,2006,2005,2006,1988,1988,1992,1966,1976,1994,1995,1996,1994,1997,1999,1998,2001,2003,1974,1977,1977,1972,1975,1972,1972,2004,2002,2000,2002,2002,1994,2002,2003,1999,2003,2003,2007,2006,2004,2005,2006,2006,1965,1965,1925,1990,1976,2005,2005,2008,2007,2005,1959,1955,1954,1946,1931,1920,1954,1910,1955,1955,1923,1926,1921,1937,1930,1921,1918,1926,1941,1913,1910,1946,1951,1918,1934,1941,1932,1945,1957,1940,1953,1960,1968,1980,1971,1957,1919,1940,1941,1925,1922,1920,1950,1939,1895,1957,1930,2006,2006,2002,1991,1974,1987,1998,1958,2006,2006,2007,1990,1996,2003,2002,1996,2003,1963,2006,2006,2005,2007,1996,1963,1967,1961,1976,1976,1972,1970,1970,1970,1976,1976,1977,1977,1977,1977,1971,1970,1961,1982,1976,1982,1983,1991,1984,1956,1957,1957,1969,1997,1995,1996,2005,2005,2005,2006,1993,1993,1987,1987,2005,2006,2005,2006,2006,1948,1955,2005,2005,2005,1984,1988,1977,1976,1988,1978,1978,1975,1976,2005,1975,1976,1974,1974,1970,2002,1973,1973,1973,1972,1971,1972,1972,1972,1972,1975,1967,1967,1976,2004,2006,2006,2004,2006,2006,2005,2004,2005,2005,2005,2005,2006,2005,2003,2006,2005,2004,2005,2005,2005,2005,2005,2005,2006,2005,2006,2006,2006,2006,2004,2006,2006,2003,2003,2002,2004,2004,2005,2005,2006,2006,2005,2002,2004,2000,2000,2000,2006,1999,1997,1998,2000,1995,2000,1998,1998,1995,1993,1994,1993,2005,2006,2005,2006,2006,2006,2006,2006,2005,2006,2006,2005,2005,2005,2005,2004,1992,1990,1991,1994,1966,1962,1977,1965,1968,1963,1965,1965,1964,1961,1967,1974,1991,1992,1993,1992,1994,2004,2005,2005,2005,2000,1999,2000,2003,2001,1995,1977,1980,1980,1980,1978,1981,1972,1968,1968,1968,1968,1972,1969,1967,1968,1968,1968,1968,1966,1967,1971,1961,1958,1959,1965,1964,1964,1960,1954,1946,1926,1908,1961,1952,1951,1941,1949,1967,1964,1961,1966,1954,1918,1963,1962,1959,1957,1957,1979,1954,1952,1951,1955,1951,1941,1956,1925,1947,1924,1930,1921,1929,1900,1920,1915,1910,1915,1900,1936,1966,1963,1962,1959,1959,1957,1961,1959,1962,1950,1949,1950,1950,1949,1961,1966,1962,1962,1962,1900,1925,1948,1920,1900,1925,1900,1930,1930,1900,1924,1925,1880,1950,1955,1924,1920,1910,1900,1914,1910,1900,1916,1920,1923,1920,1958,1918,1939,1924,1939,1934,1936,1930,1925,1947,1928,1925,1925,1970,1924,1919,1937,1935,1930,1951,1964,1958,1935,1936,1963,1967,1963,1967,1966,1964,1966,1968,1978,1968,1978,1977,1958,1957,1955,1924,1965,1956,1967,1963,1971,1974,1954,1942,1928,1935,1952,1954,1953,1954,1948,1985,1993,2005,2006,2006,2005,2006,2006,2006,2005,2005,2005,2005,1992,1964,1969,1968,1996,1998,1995,1997,1999,1999,1999,2002,2002,2001,1976,1977,1978,1969,1972,1972,1972,2002,1999,2002,2001,2002,2002,1999,1996,1995,2004,2003,2006,2003,2004,2003,2005,2005,2005,2005,2005,1959,1951,1975,1975,1969,2002,2003,2005,2005,2005,2004,2004,2004,2004,1948,1915,1924,1922,1912,1922,1910,1916,1940,1938,1945,1914,1920,1926,1919,1920,1939,1941,1915,1920,1929,1940,1922,1929,1932,1956,1977,1950,1953,1969,1942,1926,1925,1936,1920,1945,1949,1951,1916,2005,2004,1979,1978,2001,1975,1988,1989,1986,1958,1981,1987,1990,1990,2000,2002,2005,1997,2006,1977,1977,1973,1968,1970,1970,1972,1969,1970,1970,1970,1970,1976,1976,1984,1983,1992,1974,1993],"z":[172000,244000,189900,195500,213500,191500,189000,175900,185000,171500,538000,164000,141000,210000,190000,216000,149900,142000,115000,96000,105500,127500,149900,120000,146000,376162,306000,395192,290941,220000,275000,214000,224000,500000,319900,205000,175500,199500,192000,216500,185088,222500,333168,355000,260400,325000,221000,410000,221500,215200,262500,254900,233000,181000,205000,143000,189000,99500,125000,194500,152000,171000,67500,112000,138500,122000,133000,169000,285000,260000,155000,151000,149500,152000,222000,155000,147110,267916,155000,206000,130500,230000,218500,243500,196500,197500,171000,142250,143000,128950,159000,136300,180500,137500,84900,142125,172500,116500,76500,128000,153000,132000,178000,154300,180000,135000,214000,136000,165500,145000,148000,142000,159500,108000,135000,122500,119000,109000,105000,107500,97500,162000,242000,132000,154000,166000,160000,148000,192000,80400,96500,109500,119000,130000,119000,12789,105900,150000,240000,76500,149700,122500,140750,128500,209500,134000,128000,132000,139900,123900,138400,109500,140000,149500,159900,122000,110000,55000,140000,244400,107500,100000,93369,114900,94000,136000,131500,125000,154000,137900,158000,137250,328000,85000,128000,260000,230000,124000,83000,144500,129000,127000,128000,186000,308030,84900,178000,236000,245350,206000,198900,187000,320000,138500,155000,159000,191000,200500,150000,161750,128200,127000,318000,237000,224900,143750,143000,213000,185500,155891,100000,144000,64000,125200,107000,90000,80000,144500,58500,127000,126000,100000,257500,215000,203135,162500,289000,125500,82000,110000,68400,102776,50138,254900,190000,201000,170000,160000,220000,174000,269500,214900,173500,139000,119500,85000,88250,85500,130000,157900,149900,159000,136000,161000,285000,124500,157000,345000,189500,270000,377500,278000,240000,239500,177500,185000,191000,178000,185000,181316,178000,174000,173000,225000,180500,187500,501837,372500,260000,185000,181000,82500,215000,154000,200000,249000,187500,184000,157000,152000,197500,240900,263435,235000,213000,158000,165000,158000,136000,156000,128000,143000,120500,97000,125000,112000,97000,118000,143750,146000,148500,128500,100000,148800,337500,462000,485000,555000,325000,398800,335000,402861,451950,610000,296000,409900,255500,335000,274900,300000,324000,350000,280000,284000,386250,445000,290000,255900,196000,184500,212500,230000,552000,382500,320000,248500,286500,254000,173000,173000,167800,174000,174000,174000,180000,170000,189500,184100,195500,192000,178000,207500,236000,257500,244000,179000,190000,245000,181000,214000,337000,403000,327000,336000,315000,263550,402000,248000,244600,275000,287090,275500,245000,253000,468000,210000,208300,225000,229456,229800,370878,238500,310000,270000,241000,264500,291000,263000,185000,234500,209000,159000,152000,143500,193000,203000,184900,159000,153000,220000,257000,171500,120000,145000,184000,162000,160000,82000,110000,135000,141000,122000,124100,62383,123000,275000,280750,164500,173733,222000,195000,172500,180000,172500,318750,241600,180500,150000,154000,185000,185750,200000,256900,197900,163000,113000,230000,213250,227000,130000,143000,168500,172500,161500,141500,118000,127500,140000,177625,110000,167000,145100,154000,158000,124500,174500,122000,82500,110000,175000,167000,140000,147000,124000,256000,193500,110000,104900,150000,176000,149500,155000,153000,153000,135000,126000,115000,113000,145500,95000,129900,99900,135000,125000,142900,156500,59000,105000,78500,190000,154000,163000,143500,153000,157500,113500,133000,92900,128500,90000,138000,128000,139000,118900,138000,132500,133500,135000,144750,145000,115000,110000,103500,66500,130000,94550,135000,103000,80000,45000,37900,91300,99500,113000,87500,110000,106000,265979,160000,119000,168000,58500,85000,146500,34900,44000,223500,205000,137000,128000,134900,132500,93000,119000,100000,141500,133000,60000,115000,150000,126500,214500,155000,155000,179900,104000,62500,149000,103000,123000,97500,135000,70000,116000,179000,179000,159900,61000,103600,63000,175000,130000,149900,139000,165000,165000,63900,161500,143000,82500,190000,122000,127500,121500,60000,113000,131000,105000,162000,156500,213000,239900,239500,131000,118858,118858,142953,148325,269500,269500,269500,323262,297000,332000,239900,212000,239000,220000,200000,221800,237000,173000,275000,233500,152000,231500,207000,145000,138000,197900,192000,195000,227000,230000,187100,203000,124000,140000,134900,150500,143500,133500,123000,133900,133000,236500,261500,313000,198500,220000,210000,219500,178000,213000,144000,140000,293200,190000,190000,173500,170000,108000,167000,100000,198500,159500,127000,125000,145500,85000,120000,98000,82000,119900,112000,110000,117000,60000,139500,197000,105000,155000,177000,145000,137000,234000,177500,160000,155000,163500,154900,205000,174500,193000,158000,224000,115000,137000,124000,208000,222000,123000,75000,251000,239686,215000,156450,173000,152000,137500,375000,410000,316500,201000,175000,213500,220000,170000,315000,425000,139500,115000,162000,86000,80000,97000,88000,131900,131250,165500,112000,149000,143000,130000,196000,173000,176500,237500,187500,192000,173000,175000,247900,180000,180000,181000,183000,188000,194500,185000,188500,325000,115000,133000,226500,175500,181900,235000,220000,272000,161000,146900,180000,205000,133000,151000,111900,123000,181000,103400,100000,100500,106000,85400,89500,111750,140000,143000,394617,426000,446261,372402,383000,390000,460000,379000,250000,316000,615000,412500,284000,421250,336860,367294,192000,274000,370967,234250,219500,155000,154000,207000,195000,219990,191000,159895,187687,179000,190000,176000,213000,217300,186500,226750,184000,176000,225000,185900,284500,315000,291000,350000,279500,290000,350000,341000,271000,301500,235128,214000,232000,240000,264132,245000,227680,297900,247000,250580,226700,250000,250000,205950,230348,207500,141000,188000,155000,170000,182000,163000,190500,175000,179200,187000,193000,153900,128000,135000,115000,119916,142000,140000,290000,372500,171900,178000,165000,146000,172900,285000,290000,328900,160000,170000,223000,170000,345000,245500,217500,324000,162500,150000,290000,183000,150000,145000,147000,145000,142600,135000,170000,299800,185000,173000,98000,109008,155000,174900,140000,145000,179900,168500,140000,153000,72500,52000,165500,201800,139950,174000,227000,135000,124000,136500,185000,163000,166800,139000,166000,136000,133000,116000,137500,180000,110000,100000,146000,114000,140000,139000,139000,157000,242000,94000,98300,127000,159000,125900,138000,112500,105500,130000,109500,140000,167900,136870,143000,122600,111000,256000,64000,139500,118000,119164,78000,95000,115000,147000,140000,46500,112500,107900,65000,139500,132000,114000,129500,129400,161000,128000,116900,55000,184000,131500,97000,115500,138000,108000,79500,153000,109500,124000,106900,164900,119000,120000,157000,105000,115000,79000,123000,81300,162900,123500,129900,128000,68500,127000,207000,184000,160000,127500,93850,120000,127500,127000,125000,79900,85000,82375,135000,124000,134000,135000,134432,148000,129500,157500,109900,145000,130000,153000,120000,152000,108959,95541,149350,144900,185000,165000,235000,140000,108000,152400,144000,192000,245000,241500,256000,177000,155000,260000,235000,99600,119000,107500,125000,79000,95000,262280,260000,226500,225000,177439,248500,475000,395039,228000,225000,195000,200000,155000,144000,145000,226001,207500,188000,191000,221000,231500,235000,223500,130250,149900,158000,147000,143195,163000,127000,124900,230000,237000,235000,230500,230000,222500,224900,183000,207000,210000,136500,145000,208900,185000,214000,208500,186500,210000,185900,179900,218836,193000,189000,149300,141000,149000,85000,123000,147500,165000,135000,108000,137500,165400,147000,160500,176000,284700,160000,148000,82000,120000,96000,99000,135000,100000,108000,67000,135900,140000,136500,168000,161900,191000,177000,147500,91000,231000,115000,138000,149000,188700,198000,104000,257076,381000,311500,263400,236500,224000,151000,120000,55000,120500,120500,126000,165500,13100,89000,80900,81000,65000,294464,275000,271000,213000,171500,100000,228500,228950,241500,287000,294000,293077,264966,172500,167500,218689,150000,184000,180000,175000,232500,305000,370000,209200,206300,146000,160500,115000,129500,105000,152500,98000,81000,128500,119500,130500,138000,160000,137500,172000,103000,167000,244000,268000,225000,168000,177000,161500,251000,160000,180000,178750,176000,204000,160000,163900,168000,154204,170000,207500,212000,349265,155000,319900,392000,455000,182900,174000,178000,213000,192000,190000,195000,197000,152000,170000,175000,197900,174000,178900,143250,184000,155000,133000,123000,110000,120500,155000,177000,113500,113000,113700,106000,122500,155000,142500,129250,356000,314813,322400,318000,492000,338931,280000,479069,380000,250000,440000,418000,500067,260116,317000,319500,325624,354000,350000,281500,245700,232698,250000,194700,204000,200000,207000,209500,209500,202500,280000,318061,221370,176000,178900,168165,171925,198444,179540,181134,156932,166000,177594,173500,172500,194201,226500,185485,188500,175000,215000,206580,183500,165500,211000,181000,219500,175000,170000,162000,185000,745000,384500,248000,466500,410000,322500,252000,755000,269790,315750,290000,290000,430000,330000,213133,260261,320000,282922,215000,255000,147000,235876,311872,248328,227000,260000,249000,307000,250000,208900,212109,310013,249700,227875,261329,253000,340000,146000,147000,149000,181000,201000,191750,179000,215000,128000,144000,132500,132500,129000,145000,128500,125500,294000,171000,147000,285000,193800,208900,207500,199900,164700,176500,168500,177000,177000,148800,174000,301000,312500,255000,194000,218000,213750,373000,143450,240050,188500,136905,175500,127000,143000,144000,119000,103000,139900,151500,126500,120000,106500,137500,117600,163500,161000,158000,147000,200000,150750,101800,124000,138500,39300,64500,112000,165000,144000,137000,105000,146500,126000,175000,158500,114500,129000,131000,142100,139000,157900,139400,120000,128600,136000,134500,127000,130000,115000,116900,132000,153000,138000,135000,156000,109000,103200,148000,86000,172000,128500,135000,122900,119200,143000,119000,102000,129000,135000,152000,140000,152000,156500,141000,99000,169500,103000,127500,89500,99900,130000,135000,120000,85000,108500,137000,110500,184900,145000,125000,90000,144100,124500,185000,133900,152000,153500,159500,87000,104500,110000,136500,128250,210000,135000,128000,131000,113000,132000,131750,132500,137500,132000,102000,200000,180500,165000,153575,140000,136000,113000,169500,139400,202500,127000,141000,212300,99500,101000,109900,122000,87000,50000,219000,200500,126000,108500,130000,158450,118500,165000,123000,129000,125000,108000,119900,134500,127000,129000,143500,158000,112000,165250,150000,89500,302000,182000,130000,109900,255000,243000,154000,118000,150000,86000,130000,136500,96000,120000,228500,179900,225000,301000,238000,383970,250000,360000,279500,200141,246500,217000,212999,175900,176432,277000,207000,240000,187500,279000,139500,177500,147900,123600,204750,235500,217000,190550,226000,131000,160000,134900,112500,122000,127000,117000,305900,228500,270000,192000,200000,228000,285000,131500,246900,219500,185000,179400,213500,179600,173500,167840,168675,140000,94750,122000,118500,133500,157000,171500,183850,184750,140000,131750,61500,111000,98500,79000,108500,110000,112000,125000,79275,165000,136500,146500,175000,148500,141500,189950,135000,164000,90350,139000,145000,153500,239000,359100,140000,315000,259500,257500,219500,217000,201000,215000,123900,198000,200624,115000,141000,87000,129850,75200,118400,152000,68104,119600,140000,124900,375000,235000,245000,210000,143000,244000,330000,257000,267300,265900,239000,187500,204000,187500,282000,178000,279900,186700,283463,392000,281213,147000,140000,132250,143000,168000,129900,134000,85500,106500,93900,84500,75190,146800,153500,188000,196000,157000,138000,129500,80000,129500,135000,124500,139000,93500,124500,157500,169000,252000,192100,222000,170000,202000,320000,239900,309000,274725,183500,165600,130000,239000,457347,356383,556581,361919,438780,169000,145000,318000,319000,470000,202500,229000,235000,190000,241500,188900,250000,179900,172000,294323,184500,162900,181000,155000,116050,190000,105500,125500,83000,116000,91500,118000,89000,108000,94500,146300,145000,123000,144000,315000,412083,342643,252000,465000,293000,415000,326000,325300,300000,275500,345000,298236,329900,360000,281000,372397,378000,437154,275000,185850,282500,202500,202665,310090,169990,169985,179665,219210,174190,258000,185101,210250,234000,215000,246990,178740,225000,167240,156820,264561,246578,192140,183200,178000,230500,172400,215000,287602,230000,348000,286000,300000,625000,405000,280000,258000,350000,584500,321000,315000,252000,336820,423000,290000,199000,198600,232600,266000,186500,197000,185000,176000,139500,186800,132000,158000,175900,172000,151000,150000,107000,129500,151000,126000,116000,133500,120875,137000,124000,135000,129200,260000,260000,334000,310000,268000,262000,176400,151000,149900,144152,166000,183900,165000,139000,221000,270000,165000,214000,188000,190000,170000,385000,146500,170000,262500,179900,250000,165150,140000,135500,142000,155000,157500,138500,124400,158000,190000,136500,129900,145000,185900,160000,157500,151500,137000,121600,79900,127000,161000,146500,135000,133000,137000,119000,172000,98600,226000,118000,235000,135000,132500,143000,132000,134450,135960,140000,139500,155000,125000,142000,167000,159000,180000,127000,112000,99800,108480,68000,86900,120000,155500,80000,105000,160000,170000,159950,165000,159000,159500,120000,129900,183000,157500,277500,147500,135000,109500,81400,87500,146000,155000,134500,120000,105000,169000,107000,135000,111500,156500,178000,139900,105000,110000,111500,108000,111500,124000,105000,135500,139000,64000,137000,87000,163000,155000,79000,144000,157000,125000,93500,125000,64500,140200,202500,119900,114500,115000,75000,88000,80500,149000,110500,109000,129000,107000,72000,119500,84500,90000,137500,150000,130000,125000,80000,148000,90000,154500,153600,164500,132000,142500,158000,149500,180000,160500,156500,172500,155000,170000,105000,145000,168000,278000,164000,130000,142500,146000,128000,235000,415000,135000,136900,149900,93000,91500,180000,215000,183600,194000,193879,221500,204900,239799,233555,294900,209700,225000,181000,220000,190000,180000,158900,148000,193000,156000,217000,214000,196000,217000,200000,192500,205000,132500,157500,174000,128500,128500,149900,119900,255000,214000,220000,275000,197000,230000,268500,210900,237000,216837,133000,233230,207000,195000,200000,212900,198000,173900,163990,164990,149900,102000,127500,127500,119900,117250,229000,145000,140000,142500,134000,130000,137500,130000,97900,92000,104900,83000,118500,35000,121000,160000,140000,137000,128000,138887,149000,102000,167000,200100,131000,112000,140000,195000,230000,194000,137500,218000,199500,230000,217500,257000,157000,223000,102000,145400,72000,106500,108000,51689,35311,115000,78000,375000,300000,242500,145000,209000,148000,171000,335000,230000,250764,228000,176000,180000,250000,202000,312500,320000,215000,84500,104500,127000,151400,126500,146500,73000,79400,140000,92000,87550,79500,71000,150900,188000,142500,131000,132000,170000,188000],"mode":"markers","marker":{"color":"rgba(31,119,180,1)","size":5,"opacity":0.25,"line":{"color":"rgba(31,119,180,1)"}},"showlegend":false,"type":"scatter3d","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"colorbar":{"title":"Sale_Price","ticklen":2},"colorscale":[["0","rgba(68,1,84,1)"],["0.112973744389459","rgba(72,41,120,1)"],["0.16417914321015","rgba(69,57,128,1)"],["0.203296755692256","rgba(65,69,134,1)"],["0.23721977412712","rgba(61,78,138,1)"],["0.269981071804454","rgba(58,87,139,1)"],["0.302887097998963","rgba(54,96,141,1)"],["0.335776225127638","rgba(49,105,142,1)"],["0.368665352256313","rgba(47,112,142,1)"],["0.401382018271436","rgba(44,120,142,1)"],["0.434455737584248","rgba(40,128,142,1)"],["0.467110872871325","rgba(38,136,141,1)"],["0.5","rgba(37,144,140,1)"],["0.532889127128675","rgba(34,152,138,1)"],["0.565544262415753","rgba(34,160,136,1)"],["0.598617981728564","rgba(42,168,131,1)"],["0.631334647743686","rgba(48,175,126,1)"],["0.664223774872362","rgba(53,182,121,1)"],["0.697112902001037","rgba(73,189,113,1)"],["0.730018928195546","rgba(89,195,104,1)"],["0.76278022587288","rgba(103,202,94,1)"],["0.796703244307745","rgba(123,208,83,1)"],["0.835820856789849","rgba(149,214,69,1)"],["0.887026255610541","rgba(179,222,45,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"x":[334,384,434,484,534,584,634,684,734,784,834,884,934,984,1034,1084,1134,1184,1234,1284,1334,1384,1434,1484,1534,1584,1634,1684,1734,1784,1834,1884,1934,1984,2034,2084,2134,2184,2234,2284,2334,2384,2434,2484,2534,2584,2634,2684,2734,2784,2834,2884,2934,2984,3034,3084,3134,3184,3234,3284,3334,3384,3434,3484,3534,3584,3634,3684,3734,3784,3834,3884,3934,3984,4034,4084,4134,4184,4234,4284,4334,4384,4434,4484,4534,4584,4634,4684,4734,4784,4834,4884,4934,4984,5034,5084,5134,5184,5234,5284,5334,5384,5434,5484,5534,5584,5634],"y":[1875,1885,1895,1905,1915,1925,1935,1945,1955,1965,1975,1985,1995,2005],"z":[[-35118.3274334529,-30350.8243413288,-25583.3212492049,-20815.8181570808,-16048.3150649567,-11280.8119728325,-6513.30888070865,-1745.80578858452,3021.69730353961,7789.20039566373,12556.7034877879,17324.2065799118,22091.7096720359,26859.21276416,31626.7158562841,36394.218948408,41161.7220405322,45929.2251326563,50696.7282247804,55464.2313169045,60231.7344090284,64999.2375011526,69766.7405932767,74534.2436854008,79301.7467775247,84069.2498696488,88836.752961773,93604.2560538971,98371.7591460212,103139.262238145,107906.765330269,112674.268422393,117441.771514517,122209.274606641,126976.777698766,131744.28079089,136511.783883014,141279.286975138,146046.790067262,150814.293159386,155581.79625151,160349.299343634,165116.802435758,169884.305527882,174651.808620006,179419.31171213,184186.814804254,188954.317896378,193721.820988503,198489.324080627,203256.827172751,208024.330264875,212791.833356999,217559.336449123,222326.839541247,227094.342633371,231861.845725495,236629.348817619,241396.851909743,246164.355001867,250931.858093991,255699.361186116,260466.86427824,265234.367370364,270001.870462488,274769.373554612,279536.876646736,284304.37973886,289071.882830984,293839.385923108,298606.889015232,303374.392107356,308141.89519948,312909.398291604,317676.901383728,322444.404475853,327211.907567977,331979.410660101,336746.913752225,341514.416844349,346281.919936473,351049.423028597,355816.926120721,360584.429212845,365351.932304969,370119.435397093,374886.938489217,379654.441581341,384421.944673466,389189.44776559,393956.950857714,398724.453949838,403491.957041962,408259.460134086,413026.96322621,417794.466318334,422561.969410458,427329.472502582,432096.975594706,436864.47868683,441631.981778954,446399.484871079,451166.987963203,455934.491055327,460701.994147451,465469.497239575,470237.000331699],[-24254.1584974225,-19486.6554052983,-14719.1523131744,-9951.64922105032,-5184.14612892619,-416.643036802066,4350.86005532183,9118.36314744595,13885.8662395701,18653.3693316942,23420.8724238183,28188.3755159422,32955.8786080664,37723.3817001905,42490.8847923146,47258.3878844385,52025.8909765626,56793.3940686868,61560.8971608109,66328.400252935,71095.9033450589,75863.406437183,80630.9095293072,85398.4126214313,90165.9157135552,94933.4188056793,99700.9218978034,104468.424989928,109235.928082052,114003.431174176,118770.9342663,123538.437358424,128305.940450548,133073.443542672,137840.946634796,142608.44972692,147375.952819044,152143.455911168,156910.959003292,161678.462095416,166445.965187541,171213.468279664,175980.971371789,180748.474463913,185515.977556037,190283.480648161,195050.983740285,199818.486832409,204585.989924533,209353.493016657,214120.996108781,218888.499200905,223656.002293029,228423.505385153,233191.008477278,237958.511569401,242726.014661526,247493.51775365,252261.020845774,257028.523937898,261796.027030022,266563.530122146,271331.03321427,276098.536306394,280866.039398518,285633.542490642,290401.045582766,295168.548674891,299936.051767014,304703.554859139,309471.057951263,314238.561043387,319006.064135511,323773.567227635,328541.070319759,333308.573411883,338076.076504007,342843.579596131,347611.082688255,352378.585780379,357146.088872503,361913.591964628,366681.095056752,371448.598148876,376216.101241,380983.604333124,385751.107425248,390518.610517372,395286.113609496,400053.61670162,404821.119793744,409588.622885868,414356.125977992,419123.629070116,423891.13216224,428658.635254364,433426.138346489,438193.641438613,442961.144530737,447728.647622861,452496.150714985,457263.653807109,462031.156899233,466798.659991357,471566.163083481,476333.666175605,481101.169267729],[-13389.989561392,-8622.48646926787,-3854.98337714397,912.519714980153,5680.02280710428,10447.5258992284,15215.0289913523,19982.5320834764,24750.0351756006,29517.5382677247,34285.0413598488,39052.5444519727,43820.0475440968,48587.550636221,53355.0537283451,58122.556820469,62890.0599125931,67657.5630047172,72425.0660968414,77192.5691889655,81960.0722810894,86727.5753732135,91495.0784653376,96262.5815574618,101030.084649586,105797.58774171,110565.090833834,115332.593925958,120100.097018082,124867.600110206,129635.10320233,134402.606294454,139170.109386578,143937.612478702,148705.115570826,153472.618662951,158240.121755075,163007.624847199,167775.127939323,172542.631031447,177310.134123571,182077.637215695,186845.140307819,191612.643399943,196380.146492067,201147.649584191,205915.152676315,210682.655768439,215450.158860564,220217.661952688,224985.165044812,229752.668136936,234520.17122906,239287.674321184,244055.177413308,248822.680505432,253590.183597556,258357.68668968,263125.189781804,267892.692873928,272660.195966052,277427.699058176,282195.202150301,286962.705242425,291730.208334549,296497.711426673,301265.214518797,306032.717610921,310800.220703045,315567.723795169,320335.226887293,325102.729979417,329870.233071541,334637.736163665,339405.239255789,344172.742347914,348940.245440037,353707.748532162,358475.251624286,363242.75471641,368010.257808534,372777.760900658,377545.263992782,382312.767084906,387080.27017703,391847.773269154,396615.276361278,401382.779453402,406150.282545527,410917.785637651,415685.288729775,420452.791821899,425220.294914023,429987.798006147,434755.301098271,439522.804190395,444290.307282519,449057.810374643,453825.313466767,458592.816558891,463360.319651015,468127.822743139,472895.325835264,477662.828927387,482430.332019512,487197.835111636,491965.33820376],[-2525.82062536152,2241.68246676261,7009.1855588865,11776.6886510106,16544.1917431348,21311.6948352589,26079.1979273828,30846.7010195069,35614.204111631,40381.7072037552,45149.2102958793,49916.7133880032,54684.2164801273,59451.7195722514,64219.2226643756,68986.7257564995,73754.2288486236,78521.7319407477,83289.2350328718,88056.738124996,92824.2412171199,97591.744309244,102359.247401368,107126.750493492,111894.253585616,116661.75667774,121429.259769864,126196.762861989,130964.265954113,135731.769046237,140499.272138361,145266.775230485,150034.278322609,154801.781414733,159569.284506857,164336.787598981,169104.290691105,173871.793783229,178639.296875353,183406.799967477,188174.303059601,192941.806151725,197709.309243849,202476.812335974,207244.315428098,212011.818520222,216779.321612346,221546.82470447,226314.327796594,231081.830888718,235849.333980842,240616.837072966,245384.34016509,250151.843257214,254919.346349339,259686.849441462,264454.352533587,269221.855625711,273989.358717835,278756.861809959,283524.364902083,288291.867994207,293059.371086331,297826.874178455,302594.377270579,307361.880362703,312129.383454827,316896.886546951,321664.389639075,326431.8927312,331199.395823324,335966.898915448,340734.402007572,345501.905099696,350269.40819182,355036.911283944,359804.414376068,364571.917468192,369339.420560316,374106.92365244,378874.426744564,383641.929836689,388409.432928812,393176.936020937,397944.439113061,402711.942205185,407479.445297309,412246.948389433,417014.451481557,421781.954573681,426549.457665805,431316.960757929,436084.463850053,440851.966942177,445619.470034301,450386.973126425,455154.47621855,459921.979310674,464689.482402798,469456.985494922,474224.488587046,478991.99167917,483759.494771294,488526.997863418,493294.500955542,498062.004047666,502829.50713979],[8338.34831066919,13105.8514027933,17873.3544949172,22640.8575870413,27408.3606791655,32175.8637712896,36943.3668634135,41710.8699555376,46478.3730476617,51245.8761397859,56013.37923191,60780.8823240339,65548.385416158,70315.8885082821,75083.3916004063,79850.8946925302,84618.3977846543,89385.9008767784,94153.4039689025,98920.9070610267,103688.410153151,108455.913245275,113223.416337399,117990.919429523,122758.422521647,127525.925613771,132293.428705895,137060.931798019,141828.434890143,146595.937982267,151363.441074391,156130.944166515,160898.44725864,165665.950350764,170433.453442888,175200.956535012,179968.459627136,184735.96271926,189503.465811384,194270.968903508,199038.471995632,203805.975087756,208573.47817988,213340.981272004,218108.484364128,222875.987456253,227643.490548376,232410.993640501,237178.496732625,241945.999824749,246713.502916873,251481.006008997,256248.509101121,261016.012193245,265783.515285369,270551.018377493,275318.521469617,280086.024561741,284853.527653866,289621.030745989,294388.533838114,299156.036930238,303923.540022362,308691.043114486,313458.54620661,318226.049298734,322993.552390858,327761.055482982,332528.558575106,337296.06166723,342063.564759354,346831.067851478,351598.570943603,356366.074035726,361133.577127851,365901.080219975,370668.583312099,375436.086404223,380203.589496347,384971.092588471,389738.595680595,394506.098772719,399273.601864843,404041.104956967,408808.608049091,413576.111141215,418343.614233339,423111.117325464,427878.620417588,432646.123509712,437413.626601836,442181.12969396,446948.632786084,451716.135878208,456483.638970332,461251.142062456,466018.64515458,470786.148246704,475553.651338828,480321.154430953,485088.657523077,489856.160615201,494623.663707325,499391.166799449,504158.669891573,508926.172983697,513693.676075821],[19202.5172466997,23970.0203388238,28737.5234309477,33505.0265230718,38272.5296151959,43040.0327073201,47807.535799444,52575.0388915681,57342.5419836922,62110.0450758163,66877.5481679405,71645.0512600644,76412.5543521885,81180.0574443126,85947.5605364367,90715.0636285606,95482.5667206848,100250.069812809,105017.572904933,109785.075997057,114552.579089181,119320.082181305,124087.585273429,128855.088365553,133622.591457677,138390.094549801,143157.597641926,147925.10073405,152692.603826174,157460.106918298,162227.610010422,166995.113102546,171762.61619467,176530.119286794,181297.622378918,186065.125471042,190832.628563166,195600.13165529,200367.634747414,205135.137839539,209902.640931663,214670.144023787,219437.647115911,224205.150208035,228972.653300159,233740.156392283,238507.659484407,243275.162576531,248042.665668655,252810.168760779,257577.671852903,262345.174945027,267112.678037151,271880.181129276,276647.6842214,281415.187313524,286182.690405648,290950.193497772,295717.696589896,300485.19968202,305252.702774144,310020.205866268,314787.708958392,319555.212050516,324322.71514264,329090.218234764,333857.721326889,338625.224419013,343392.727511137,348160.230603261,352927.733695385,357695.236787509,362462.739879633,367230.242971757,371997.746063881,376765.249156005,381532.752248129,386300.255340253,391067.758432377,395835.261524501,400602.764616626,405370.26770875,410137.770800874,414905.273892998,419672.776985122,424440.280077246,429207.78316937,433975.286261494,438742.789353618,443510.292445742,448277.795537866,453045.29862999,457812.801722114,462580.304814239,467347.807906362,472115.310998487,476882.814090611,481650.317182735,486417.820274859,491185.323366983,495952.826459107,500720.329551231,505487.832643355,510255.335735479,515022.838827603,519790.341919727,524557.845011852],[30066.6861827304,34834.1892748545,39601.6923669784,44369.1954591025,49136.6985512266,53904.2016433508,58671.7047354747,63439.2078275988,68206.7109197229,72974.214011847,77741.7171039712,82509.2201960951,87276.7232882192,92044.2263803433,96811.7294724674,101579.232564591,106346.735656715,111114.23874884,115881.741840964,120649.244933088,125416.748025212,130184.251117336,134951.75420946,139719.257301584,144486.760393708,149254.263485832,154021.766577956,158789.26967008,163556.772762205,168324.275854328,173091.778946453,177859.282038577,182626.785130701,187394.288222825,192161.791314949,196929.294407073,201696.797499197,206464.300591321,211231.803683445,215999.306775569,220766.809867693,225534.312959817,230301.816051941,235069.319144065,239836.82223619,244604.325328314,249371.828420438,254139.331512562,258906.834604686,263674.33769681,268441.840788934,273209.343881058,277976.846973182,282744.350065306,287511.85315743,292279.356249554,297046.859341678,301814.362433803,306581.865525927,311349.368618051,316116.871710175,320884.374802299,325651.877894423,330419.380986547,335186.884078671,339954.387170795,344721.890262919,349489.393355043,354256.896447167,359024.399539291,363791.902631416,368559.40572354,373326.908815664,378094.411907788,382861.914999912,387629.418092036,392396.92118416,397164.424276284,401931.927368408,406699.430460532,411466.933552656,416234.43664478,421001.939736904,425769.442829028,430536.945921153,435304.449013276,440071.952105401,444839.455197525,449606.958289649,454374.461381773,459141.964473897,463909.467566021,468676.970658145,473444.473750269,478211.976842393,482979.479934517,487746.983026641,492514.486118766,497281.98921089,502049.492303014,506816.995395138,511584.498487262,516352.001579386,521119.50467151,525887.007763634,530654.510855758,535422.013947882],[40930.8551187608,45698.358210885,50465.8613030089,55233.364395133,60000.8674872571,64768.3705793812,69535.8736715051,74303.3767636293,79070.8798557534,83838.3829478775,88605.8860400016,93373.3891321255,98140.8922242497,102908.395316374,107675.898408498,112443.401500622,117210.904592746,121978.40768487,126745.910776994,131513.413869118,136280.916961242,141048.420053366,145815.92314549,150583.426237615,155350.929329738,160118.432421863,164885.935513987,169653.438606111,174420.941698235,179188.444790359,183955.947882483,188723.450974607,193490.954066731,198258.457158855,203025.960250979,207793.463343103,212560.966435228,217328.469527352,222095.972619476,226863.4757116,231630.978803724,236398.481895848,241165.984987972,245933.488080096,250700.99117222,255468.494264344,260235.997356468,265003.500448592,269771.003540716,274538.50663284,279306.009724964,284073.512817089,288841.015909213,293608.519001337,298376.022093461,303143.525185585,307911.028277709,312678.531369833,317446.034461957,322213.537554081,326981.040646205,331748.543738329,336516.046830453,341283.549922578,346051.053014701,350818.556106826,355586.05919895,360353.562291074,365121.065383198,369888.568475322,374656.071567446,379423.57465957,384191.077751694,388958.580843818,393726.083935942,398493.587028066,403261.09012019,408028.593212314,412796.096304439,417563.599396563,422331.102488687,427098.605580811,431866.108672935,436633.611765059,441401.114857183,446168.617949307,450936.121041431,455703.624133555,460471.127225679,465238.630317803,470006.133409928,474773.636502051,479541.139594176,484308.6426863,489076.145778424,493843.648870548,498611.151962672,503378.655054796,508146.15814692,512913.661239044,517681.164331168,522448.667423292,527216.170515416,531983.67360754,536751.176699664,541518.679791789,546286.182883913],[51795.0240547913,56562.5271469154,61330.0302390393,66097.5333311635,70865.0364232876,75632.5395154117,80400.0426075356,85167.5456996597,89935.0487917839,94702.551883908,99470.0549760321,104237.558068156,109005.06116028,113772.564252404,118540.067344528,123307.570436652,128075.073528776,132842.576620901,137610.079713025,142377.582805149,147145.085897273,151912.588989397,156680.092081521,161447.595173645,166215.098265769,170982.601357893,175750.104450017,180517.607542141,185285.110634265,190052.613726389,194820.116818513,199587.619910638,204355.123002762,209122.626094886,213890.12918701,218657.632279134,223425.135371258,228192.638463382,232960.141555506,237727.64464763,242495.147739754,247262.650831878,252030.153924002,256797.657016126,261565.160108251,266332.663200375,271100.166292499,275867.669384623,280635.172476747,285402.675568871,290170.178660995,294937.681753119,299705.184845243,304472.687937367,309240.191029491,314007.694121615,318775.197213739,323542.700305864,328310.203397988,333077.706490112,337845.209582236,342612.71267436,347380.215766484,352147.718858608,356915.221950732,361682.725042856,366450.22813498,371217.731227104,375985.234319228,380752.737411352,385520.240503476,390287.743595601,395055.246687725,399822.749779849,404590.252871973,409357.755964097,414125.259056221,418892.762148345,423660.265240469,428427.768332593,433195.271424717,437962.774516841,442730.277608965,447497.780701089,452265.283793214,457032.786885337,461800.289977462,466567.793069586,471335.29616171,476102.799253834,480870.302345958,485637.805438082,490405.308530206,495172.81162233,499940.314714454,504707.817806578,509475.320898702,514242.823990826,519010.327082951,523777.830175075,528545.333267199,533312.836359323,538080.339451447,542847.842543571,547615.345635695,552382.848727819,557150.351819943],[62659.1929908218,67426.6960829459,72194.1991750698,76961.7022671939,81729.2053593181,86496.7084514422,91264.2115435661,96031.7146356902,100799.217727814,105566.720819938,110334.223912063,115101.727004186,119869.230096311,124636.733188435,129404.236280559,134171.739372683,138939.242464807,143706.745556931,148474.248649055,153241.751741179,158009.254833303,162776.757925427,167544.261017551,172311.764109676,177079.267201799,181846.770293924,186614.273386048,191381.776478172,196149.279570296,200916.78266242,205684.285754544,210451.788846668,215219.291938792,219986.795030916,224754.29812304,229521.801215164,234289.304307288,239056.807399413,243824.310491537,248591.813583661,253359.316675785,258126.819767909,262894.322860033,267661.825952157,272429.329044281,277196.832136405,281964.335228529,286731.838320653,291499.341412777,296266.844504901,301034.347597025,305801.850689149,310569.353781274,315336.856873398,320104.359965522,324871.863057646,329639.36614977,334406.869241894,339174.372334018,343941.875426142,348709.378518266,353476.88161039,358244.384702514,363011.887794639,367779.390886762,372546.893978887,377314.397071011,382081.900163135,386849.403255259,391616.906347383,396384.409439507,401151.912531631,405919.415623755,410686.918715879,415454.421808003,420221.924900127,424989.427992251,429756.931084375,434524.434176499,439291.937268624,444059.440360748,448826.943452872,453594.446544996,458361.94963712,463129.452729244,467896.955821368,472664.458913492,477431.962005616,482199.46509774,486966.968189864,491734.471281989,496501.974374112,501269.477466237,506036.980558361,510804.483650485,515571.986742609,520339.489834733,525106.992926857,529874.496018981,534641.999111105,539409.502203229,544177.005295353,548944.508387477,553712.011479601,558479.514571725,563247.01766385,568014.520755974],[73523.3619268523,78290.8650189764,83058.3681111003,87825.8712032244,92593.3742953485,97360.8773874727,102128.380479597,106895.883571721,111663.386663845,116430.889755969,121198.392848093,125965.895940217,130733.399032341,135500.902124465,140268.405216589,145035.908308713,149803.411400837,154570.914492961,159338.417585086,164105.92067721,168873.423769334,173640.926861458,178408.429953582,183175.933045706,187943.43613783,192710.939229954,197478.442322078,202245.945414202,207013.448506326,211780.95159845,216548.454690574,221315.957782699,226083.460874823,230850.963966947,235618.467059071,240385.970151195,245153.473243319,249920.976335443,254688.479427567,259455.982519691,264223.485611815,268990.988703939,273758.491796063,278525.994888187,283293.497980312,288061.001072436,292828.50416456,297596.007256684,302363.510348808,307131.013440932,311898.516533056,316666.01962518,321433.522717304,326201.025809428,330968.528901552,335736.031993676,340503.5350858,345271.038177924,350038.541270049,354806.044362172,359573.547454297,364341.050546421,369108.553638545,373876.056730669,378643.559822793,383411.062914917,388178.566007041,392946.069099165,397713.572191289,402481.075283413,407248.578375537,412016.081467662,416783.584559786,421551.08765191,426318.590744034,431086.093836158,435853.596928282,440621.100020406,445388.60311253,450156.106204654,454923.609296778,459691.112388902,464458.615481026,469226.11857315,473993.621665274,478761.124757398,483528.627849523,488296.130941647,493063.634033771,497831.137125895,502598.640218019,507366.143310143,512133.646402267,516901.149494391,521668.652586515,526436.155678639,531203.658770763,535971.161862887,540738.664955012,545506.168047136,550273.67113926,555041.174231384,559808.677323508,564576.180415632,569343.683507756,574111.18659988,578878.689692004],[84387.5308628827,89155.0339550069,93922.5370471308,98690.0401392549,103457.543231379,108225.046323503,112992.549415627,117760.052507751,122527.555599875,127295.058691999,132062.561784124,136830.064876247,141597.567968372,146365.071060496,151132.57415262,155900.077244744,160667.580336868,165435.083428992,170202.586521116,174970.08961324,179737.592705364,184505.095797488,189272.598889612,194040.101981736,198807.60507386,203575.108165985,208342.611258109,213110.114350233,217877.617442357,222645.120534481,227412.623626605,232180.126718729,236947.629810853,241715.132902977,246482.635995101,251250.139087225,256017.642179349,260785.145271474,265552.648363597,270320.151455722,275087.654547846,279855.15763997,284622.660732094,289390.163824218,294157.666916342,298925.170008466,303692.67310059,308460.176192714,313227.679284838,317995.182376962,322762.685469086,327530.18856121,332297.691653335,337065.194745459,341832.697837583,346600.200929707,351367.704021831,356135.207113955,360902.710206079,365670.213298203,370437.716390327,375205.219482451,379972.722574575,384740.225666699,389507.728758823,394275.231850947,399042.734943072,403810.238035196,408577.74112732,413345.244219444,418112.747311568,422880.250403692,427647.753495816,432415.25658794,437182.759680064,441950.262772188,446717.765864312,451485.268956436,456252.77204856,461020.275140685,465787.778232809,470555.281324933,475322.784417057,480090.287509181,484857.790601305,489625.293693429,494392.796785553,499160.299877677,503927.802969801,508695.306061925,513462.809154049,518230.312246173,522997.815338298,527765.318430422,532532.821522546,537300.32461467,542067.827706794,546835.330798918,551602.833891042,556370.336983166,561137.84007529,565905.343167414,570672.846259538,575440.349351662,580207.852443786,584975.35553591,589742.858628035],[95251.6997989132,100019.202891037,104786.705983161,109554.209075285,114321.712167409,119089.215259534,123856.718351658,128624.221443782,133391.724535906,138159.22762803,142926.730720154,147694.233812278,152461.736904402,157229.239996526,161996.74308865,166764.246180774,171531.749272898,176299.252365022,181066.755457147,185834.258549271,190601.761641395,195369.264733519,200136.767825643,204904.270917767,209671.774009891,214439.277102015,219206.780194139,223974.283286263,228741.786378387,233509.289470511,238276.792562635,243044.29565476,247811.798746884,252579.301839008,257346.804931132,262114.308023256,266881.81111538,271649.314207504,276416.817299628,281184.320391752,285951.823483876,290719.326576,295486.829668124,300254.332760248,305021.835852372,309789.338944497,314556.84203662,319324.345128745,324091.848220869,328859.351312993,333626.854405117,338394.357497241,343161.860589365,347929.363681489,352696.866773613,357464.369865737,362231.872957861,366999.376049985,371766.87914211,376534.382234233,381301.885326358,386069.388418482,390836.891510606,395604.39460273,400371.897694854,405139.400786978,409906.903879102,414674.406971226,419441.91006335,424209.413155474,428976.916247598,433744.419339722,438511.922431847,443279.425523971,448046.928616095,452814.431708219,457581.934800343,462349.437892467,467116.940984591,471884.444076715,476651.947168839,481419.450260963,486186.953353087,490954.456445211,495721.959537335,500489.462629459,505256.965721583,510024.468813708,514791.971905832,519559.474997956,524326.97809008,529094.481182204,533861.984274328,538629.487366452,543396.990458576,548164.4935507,552931.996642824,557699.499734948,562467.002827073,567234.505919197,572002.009011321,576769.512103445,581537.015195569,586304.518287693,591072.021379817,595839.524471941,600607.027564065],[106115.868734944,110883.371827068,115650.874919192,120418.378011316,125185.88110344,129953.384195564,134720.887287688,139488.390379812,144255.893471936,149023.39656406,153790.899656184,158558.402748308,163325.905840433,168093.408932557,172860.912024681,177628.415116805,182395.918208929,187163.421301053,191930.924393177,196698.427485301,201465.930577425,206233.433669549,211000.936761673,215768.439853797,220535.942945921,225303.446038045,230070.94913017,234838.452222294,239605.955314418,244373.458406542,249140.961498666,253908.46459079,258675.967682914,263443.470775038,268210.973867162,272978.476959286,277745.98005141,282513.483143535,287280.986235658,292048.489327783,296815.992419907,301583.495512031,306350.998604155,311118.501696279,315886.004788403,320653.507880527,325421.010972651,330188.514064775,334956.017156899,339723.520249023,344491.023341147,349258.526433271,354026.029525395,358793.53261752,363561.035709644,368328.538801768,373096.041893892,377863.544986016,382631.04807814,387398.551170264,392166.054262388,396933.557354512,401701.060446636,406468.56353876,411236.066630884,416003.569723008,420771.072815133,425538.575907257,430306.078999381,435073.582091505,439841.085183629,444608.588275753,449376.091367877,454143.594460001,458911.097552125,463678.600644249,468446.103736373,473213.606828497,477981.109920621,482748.613012746,487516.11610487,492283.619196994,497051.122289118,501818.625381242,506586.128473366,511353.63156549,516121.134657614,520888.637749738,525656.140841862,530423.643933986,535191.14702611,539958.650118234,544726.153210358,549493.656302483,554261.159394606,559028.662486731,563796.165578855,568563.668670979,573331.171763103,578098.674855227,582866.177947351,587633.681039475,592401.184131599,597168.687223723,601936.190315847,606703.693407971,611471.196500096]],"mode":"markers","marker":{"size":5,"opacity":0.25},"showlegend":false,"type":"surface","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>

]

---
# Assessing model accuracy

.pull-left[

We've fit four models to the Ames housing data: 

1. a single predictor, 
2. two predictors, 
3. two predictors with interaction,
4. and all possible main effect predictors. 

&lt;br&gt;

.center.bold.blue[Which model is "best"?]

]

---
# Assessing model accuracy .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 4]

.scrollable90[
.pull-left[

We've fit four models to the Ames housing data: 

1. a single predictor, 
2. two predictors, 
3. two predictors with interaction,
4. and all possible main effect predictors. 

&lt;br&gt;

.center.bold.blue[Which model is "best"?]

]

.pull-right[


```r
# create a resampling method
cv &lt;- trainControl(
  method = "repeatedcv", 
  number = 10, 
  repeats = 5
  )

# model 1 CV
set.seed(123)
(cv_model1 &lt;- train(
  Sale_Price ~ Gr_Liv_Area, 
  data = ames_train, 
* method = "lm",
  trControl = cv)
)
## Linear Regression 
## 
## 2199 samples
##    1 predictor
## 
## No pre-processing
## Resampling: Cross-Validated (10 fold, repeated 5 times) 
## Summary of sample sizes: 1979, 1979, 1979, 1980, 1979, 1979, ... 
## Resampling results:
## 
##   RMSE      Rsquared   MAE     
##   56638.21  0.5087348  38936.29
## 
## Tuning parameter 'intercept' was held constant at a value of TRUE
```

]
]

---
# Assessing model accuracy .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 5]

.scrollable90[
.pull-left[

We've fit four models to the Ames housing data: 

1. a single predictor, 
2. two predictors, 
3. two predictors with interaction,
4. and all possible main effect predictors. 

&lt;br&gt;

.center.bold.blue[Model using most predictors is marginally superior]

]

.pull-right[


```r
# model 2 CV
set.seed(123)
cv_model2 &lt;- train(
  Sale_Price ~ Gr_Liv_Area + Year_Built, 
  data = ames_train, 
  method = "lm",
  trControl = cv
  )

# model 3 CV
set.seed(123)
cv_model3 &lt;- train(
  Sale_Price ~ Gr_Liv_Area + Year_Built + Gr_Liv_Area : Year_Built, 
  data = ames_train, 
  method = "lm",
  trControl = cv
  )

# model 4 CV
set.seed(123)
cv_model4 &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  method = "lm",
  trControl = cv
  )

# Extract out of sample performance measures
summary(resamples(list(
  model1 = cv_model1, 
  model2 = cv_model2, 
  model3 = cv_model3,
  model4 = cv_model4
)))
## 
## Call:
## summary.resamples(object = resamples(list(model1 = cv_model1, model2
##  = cv_model2, model3 = cv_model3, model4 = cv_model4)))
## 
## Models: model1, model2, model3, model4 
## Number of resamples: 50 
## 
## MAE 
##            Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
## model1 33391.58 37115.39 39074.58 38936.29 40519.76 44903.97    0
## model2 27294.80 30392.32 31415.36 31665.22 32910.40 36435.19    0
## model3 26063.69 28723.74 30447.37 30384.24 31527.17 35026.06    0
## model4 13423.32 16336.78 17336.64 17783.08 18944.19 28176.20    0
## 
## RMSE 
##            Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
## model1 45041.67 53682.66 56166.20 56638.21 60191.24 68067.25    0
## model2 36153.70 43554.93 45907.15 46773.06 51105.87 59716.92    0
## model3 34660.02 41331.79 44432.30 45996.25 50120.74 61033.82    0
## model4 18834.46 28623.92 42438.30 44643.81 54707.54 97182.92    0
## 
## Rsquared 
##             Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
## model1 0.3280132 0.4614648 0.5158123 0.5087348 0.5556577 0.6291068    0
## model2 0.5165565 0.6362555 0.6707707 0.6649413 0.7030637 0.7615288    0
## model3 0.4909203 0.6315862 0.7035659 0.6781410 0.7333001 0.7964460    0
## model4 0.2978212 0.6137001 0.7517621 0.7303331 0.8854576 0.9443121    0
```

]
]

---
# Model concerns

.pull-left[

&lt;br&gt;&lt;br&gt;&lt;br&gt;

.bold.center[With simplistic models comes many assumptions...often at the expense of model performance]

]

.pull-right[

&lt;br&gt;

&lt;img src="https://media1.tenor.com/images/3c888132eb6fbedec9a131bc55a05315/tenor.gif?itemid=10744949" style="display: block; margin: auto;" /&gt;


]

---
# Model concerns

.pull-left[
1. .bold.red[Linear relationship]
2. Constant variance among residuals
3. No autocorrelation
4. More observations than predictors
5. No or little multicollinearity

&lt;br&gt;

.bold.center[&lt;u&gt;Sometimes&lt;/u&gt; we can resolve this with transformations]

]

.pull-right[

&lt;img src="04-regression_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;


]

---
# Model concerns

.pull-left[
1. Linear relationship
2. .bold.red[Constant variance among residuals]
3. No autocorrelation
4. More observations than predictors
5. No or little multicollinearity

&lt;br&gt;

.bold.center[&lt;u&gt;Sometimes&lt;/u&gt; we can resolve this with transformations or adding more features]
]

.pull-right[

&lt;img src="04-regression_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;

]

---
# Model concerns

.pull-left[
1. Linear relationship
2. Constant variance among residuals
3. .bold.red[No autocorrelation]
4. More observations than predictors
5. No or little multicollinearity

&lt;br&gt;

.bold.center[&lt;u&gt;Sometimes&lt;/u&gt; we can resolve this by adding more features]
]

.pull-right[

&lt;img src="04-regression_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

]

---
# Model concerns

.pull-left[
1. Linear relationship
2. Constant variance among residuals
3. No autocorrelation
4. .bold.red[More observations than predictors]
5. No or little multicollinearity

&lt;br&gt;

.bold.center[&lt;u&gt;Sometimes&lt;/u&gt; we can resolve this with feature reduction techniques]
]

.pull-right[

&lt;table class="table table-striped" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; y &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x3 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x4 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x5 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x6 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x7 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x8 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x9 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; x10 &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 199434 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 199698 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 158515 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 251432 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 209020 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

.bold.center.red[Not invertible --&gt; solutions are non-unique meaning there are many "right" solutions for our feature coefficients!]

]

---
# Model concerns .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 6]

.pull-left[
1. Linear relationship
2. Constant variance among residuals
3. No autocorrelation
4. More observations than predictors
5. .bold.red[No or little multicollinearity]

&lt;br&gt;

.bold.center[&lt;u&gt;Sometimes&lt;/u&gt; we can resolve this with feature reduction techniques]
]

.pull-right[


```r
m1 &lt;- lm(Sale_Price ~ Gr_Liv_Area + TotRms_AbvGrd, data = ames_train)
m2 &lt;- lm(Sale_Price ~ Gr_Liv_Area, data = ames_train)
m3 &lt;- lm(Sale_Price ~ TotRms_AbvGrd, data = ames_train)

*coef(m1)
##   (Intercept)   Gr_Liv_Area TotRms_AbvGrd 
##    44396.7120      139.6244   -11300.7303
*coef(m2)
## (Intercept) Gr_Liv_Area 
##  13908.3217    111.3867
*coef(m3)
##   (Intercept) TotRms_AbvGrd 
##      18614.36      25179.02
```

]

---
# Model concerns

.pull-left[
1. Linear relationship
2. Constant variance among residuals
3. No autocorrelation
4. More observations than predictors
5. No or little multicollinearity

]

.pull-right[

&lt;img src="http://tinderdistrict.com/wp-content/uploads/2018/06/complicated.gif" style="display: block; margin: auto;" /&gt;

]

--

&lt;br&gt;&lt;br&gt;

.bold.center[Many regression extensions have been developed to deal with these concerns.]

---
class: center, middle, inverse

.font300.white[Principal Component Regression]

---
# The idea

.pull-left[

PCR performs feature reduction to help minimize impact of:

- multicollinearity (becomes a bigger concern the more predictors we have)

- when `\(p &gt;&gt; n\)`

Steps:

1. Reduce *p* features to *c* PCs (not guided by the response)

2. Use PCs as predictors and perform regression as usual

]

.pull-right[

&lt;img src="images/pcr-steps.png" width="86%" height="86%" style="display: block; margin: auto;" /&gt;

]

---
# R packages 📦

&lt;br&gt;

.font130[
- Any package that implements PCA can be applied prior to modeling,

- See [multivariate task view](	https://CRAN.R-project.org/view=Multivariate
) on CRAN for options; however,...

- .bold[caret] provides and integrated `method = "pcr"` that helps to automate the tuning process
]
---
# Implementation .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 7]

.pull-left[


```r
# 1. hypergrid
hyper_grid &lt;- expand.grid(ncomp = seq(2, 40, by = 2))

# 2. PCR
set.seed(123)
cv_pcr &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  trControl = cv,
* method = "pcr",
* preProcess = c("zv", "center", "scale"),
* tuneGrid = hyper_grid,
  metric = "RMSE"
  )

# model with lowest RMSE
cv_pcr$bestTune
##    ncomp
## 20    40

cv_pcr$results %&gt;%
  filter(ncomp == as.numeric(cv_pcr$bestTune))
##   ncomp     RMSE  Rsquared      MAE   RMSESD RsquaredSD    MAESD
## 1    40 33719.52 0.8242447 21181.53 6806.823 0.05997334 1723.526
```

]

.pull-right[

```r
# plot cross-validated RMSE
plot(cv_pcr)
```

&lt;img src="04-regression_files/figure-html/pcr-plot-revised-1.png" style="display: block; margin: auto;" /&gt;

.center.bold[Feature reduction with PCR improves prediction error by ~ $10K]

]

---
# Tuning .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 8]

.scrollable90[
.pull-left[

- The number of PCs is the only hyperparameter

- rule of <span class=" faa-slow animated " style=" display: -moz-inline-stack; display: inline-block; transform: rotate(0deg);">&lt;img src="https://emojis.slackmojis.com/emojis/images/1511903783/3230/wiggle_thumbs_up.gif?1511903783" style="height:1em; width:auto; "/&gt;</span>
   - assess 2-*p* in evenly divided segments
   - start with a few and zoom in

]

.pull-right[


```r
# 1. hypergrid
p &lt;- length(ames_train) - 1
*hyper_grid &lt;- expand.grid(ncomp = seq(2, 80, length.out = 10))

# 2. PCR
set.seed(123)
cv_pcr &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  trControl = cv,
  method = "pcr", 
  preProcess = c("zv", "center", "scale"), 
  tuneGrid = hyper_grid, 
  metric = "RMSE"
  )

# RMSE
cv_pcr$results %&gt;%
  filter(ncomp == cv_pcr$bestTune$ncomp)
##      ncomp     RMSE  Rsquared      MAE   RMSESD RsquaredSD    MAESD
## 1 62.66667 32995.73 0.8312953 20620.62 6733.679 0.05834625 1764.946

# plot cross-validated RMSE
plot(cv_pcr)
```

&lt;img src="04-regression_files/figure-html/pcr-grid-2-1.png" style="display: block; margin: auto;" /&gt;

]
]

---
class: center, middle, inverse

.font300.white[Partial Least Squares Regression]

---
# The idea

.pull-left[

- A problem with PCR is that the PCs are developed independent of the response.

- PLS 
   - has similar intentions as PCR
   
   - finds PCs that maximize correlation with the response
   
   - typically results in a stronger signal between PCs and response

]

.pull-right[

&lt;img src="images/pls-steps.png" width="94%" height="94%" style="display: block; margin: auto;" /&gt;

]

---
# The idea

.pull-left[

- A problem with PCR is that the PCs are developed independent of the response.

- PLS 
   - has similar intentions as PCR
   
   - finds PCs that maximize correlation with the response
   
   - .bold.blue[typically results in a stronger signal between PCs and response]

]

.pull-right[

&lt;img src="04-regression_files/figure-html/pls-vs-pcr-relationship-1.png" style="display: block; margin: auto;" /&gt;

]

---
# R packages 📦

.pull-left[

## [`pls`](https://cran.r-project.org/package=pls)

* **p**artial **l**east **s**quares

* Original and primary implementation of PLS

* Provides both PLS &amp; PCR capabilities 

]
.pull-right[

## [Other pkgs](https://CRAN.R-project.org/view=Multivariate)

* `ppls`: penalized partial least squares

* `dr`: provides various dimension reduction regression options

* `plsgenomics`: provides partial least squares analyses for genomics
    
]

---
# Implementation .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 9]

.pull-left[


```r
# PLS
set.seed(123)
cv_pls &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  trControl = cv,
* method = "pls",
  preProcess = c("zv", "center", "scale"),
  tuneGrid = hyper_grid,
  metric = "RMSE"
  )

# model with lowest RMSE
cv_pls$bestTune
##   ncomp
## 1     2

cv_pls$results %&gt;%
  filter(ncomp == as.numeric(cv_pls$bestTune))
##   ncomp     RMSE  Rsquared      MAE   RMSESD RsquaredSD    MAESD
## 1     2 32612.72 0.8348697 20206.24 7268.878 0.06467004 1731.506
```

]

.pull-right[

```r
# plot cross-validated RMSE
plot(cv_pls)
```

&lt;img src="04-regression_files/figure-html/pls-plot-1.png" style="display: block; margin: auto;" /&gt;

.center.bold[Using PLS improves prediction error by an additional $500]

]

---
# Tuning

- The number of PCs is the only hyperparameter

- Will almost always require less PCs than PCR

- rule of <span class=" faa-slow animated " style=" display: -moz-inline-stack; display: inline-block; transform: rotate(0deg);">&lt;img src="https://emojis.slackmojis.com/emojis/images/1511903783/3230/wiggle_thumbs_up.gif?1511903783" style="height:1em; width:auto; "/&gt;</span>
   - assess 2-*p* in evenly divided segments
   - start with a few and zoom in

---
class: center, middle, inverse

.font300.white[Regularized Regression]

---
# The Idea

.font120[As *p* grows larger, there are three main issues we most commonly run into:]

1. Multicollinearity (we've already seen how PCR &amp; PLS help to resolve this)

2. Insufficient solution ( `\(p &gt;&gt; n\)` )

3. Interpretability
   - Approach 1: model selection
      - computationally inefficient (Ames data: `\(2^{80}\)` models to evaluate)
      - simply assume a feature as in or out `\(\rightarrow\)` _hard threshholding_
   - Approach 2: regularize
      - retain all coefficients
      - slowly pushes a feature's effect towards zero `\(\rightarrow\)` _soft threshholding_
   
--

&lt;br&gt;
.center.bold.blue[Regularization helps with all three of these issues!]

---
# Regular regression

&lt;br&gt;

`\begin{equation}
\text{minimize} \bigg \{ SSE = \sum^n_{i=1} (y_i - \hat{y}_i)^2 \bigg \}
\end{equation}`

&lt;img src="04-regression_files/figure-html/unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;

---
# Regular.red[ized] regression

&lt;br&gt;

`\begin{equation}
\text{minimize} \big \{ SSE + P \big \}
\end{equation}`

&lt;br&gt;

Modify OLS objective function by adding a ___.red[P]enalty___ parameter 

- Constrains magnitude of the coefficients

- Progressively shrinks coefficients to zero

- Reduces variability of coefficients (pulls correlated coefficients together)

- Can automate feature selection

&lt;br&gt;

.center.bold.blue[There are 3 variants of regularized regression]

---
# .red[Ridge] regression

.pull-left[
Objective function: 

`\begin{equation}
\text{minimize } \bigg \{ SSE + \lambda \sum^p_{j=1} \beta_j^2 \bigg \}
\end{equation}`

* referred to as `\(L_2\)` penalty

* pulls correlated features towards each other

* pushes coefficients to .red[near zero]

* retains .red[all] features

]

.pull-right[

&lt;img src="04-regression_files/figure-html/ridge-coef-example-1.png" style="display: block; margin: auto;" /&gt;

&lt;img src="images/lambda.001.png" width="1753" style="display: block; margin: auto;" /&gt;

]

---
# .red[Lasso] regression

.pull-left[
Objective function: 

`\begin{equation}
\text{minimize } \bigg \{ SSE + \lambda \sum^p_{j=1} | \beta_j | \bigg \}
\end{equation}`

* referred to as `\(L_1\)` penalty

* pulls correlated features towards each other

* pushes coefficients to .red[zero]

* performs .red[automated feature selection]

]

.pull-right[

&lt;img src="04-regression_files/figure-html/lasso-coef-example-1.png" style="display: block; margin: auto;" /&gt;

&lt;img src="images/lambda.001.png" width="1753" style="display: block; margin: auto;" /&gt;

]

---
# .red[Elastic net] regression

.pull-left[
Objective function: 

`\begin{equation}
\text{minimize } \bigg \{ SSE + \lambda_1 \sum^p_{j=1} \beta_j^2 + \lambda_2 \sum^p_{j=1} | \beta_j | \bigg \}
\end{equation}`

* combines `\(L_1\)` &amp; `\(L_2\)` penalties

* provides best of both worlds

]

.pull-right[

&lt;img src="04-regression_files/figure-html/elastic-net-coef-example-1.png" style="display: block; margin: auto;" /&gt;

&lt;img src="images/lambda.001.png" width="1753" style="display: block; margin: auto;" /&gt;

]

---
# Tuning .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 10]

.pull-left[

* .bold[lambda]
   - controls the magnitude of the penalty parameter
   - rule of <span class=" faa-slow animated " style=" display: -moz-inline-stack; display: inline-block; transform: rotate(0deg);">&lt;img src="https://emojis.slackmojis.com/emojis/images/1511903783/3230/wiggle_thumbs_up.gif?1511903783" style="height:1em; width:auto; "/&gt;</span>: 0.1, 10, 100, 1000, 10000

* .bold[alpha]
   - controls the type of penalty (ridge, lasso, elastic net)
   - rule of <span class=" faa-slow animated " style=" display: -moz-inline-stack; display: inline-block; transform: rotate(0deg);">&lt;img src="https://emojis.slackmojis.com/emojis/images/1511903783/3230/wiggle_thumbs_up.gif?1511903783" style="height:1em; width:auto; "/&gt;</span>: 0, .25, .50, .75, 1

]

.pull-right[

&lt;br&gt;
.center[.bold[Tip]: find tuning parameters with:]


```r
caret::getModelInfo("glmnet")$glmnet$parameters
##   parameter   class                    label
## 1     alpha numeric        Mixing Percentage
## 2    lambda numeric Regularization Parameter
```

.center[Here, "glmnet" represents the __caret__ method we are going to use]

]

---
# R packages 📦

.pull-left[

## [`glmnet`](https://cran.r-project.org/package=glmnet)

* original implementation of regularized regression in R

* linear regression, logistic and multinomial regression models, Poisson regression and the Cox model

* extremely efficient procedures for fitting the entire lasso or elastic-net regularization path

]
.pull-right[

## [h2o](https://cran.r-project.org/package=h2o) 💧

* java-based interface

* Automated feature pre-processing &amp; validation procedures

* Supports the following distributions: “guassian”, “binomial”, “multinomial”, “ordinal”, “poisson”, “gamma”, “tweedie”
    
]

.center.bold[Other options exist (see __Regularized and Shrinkage Methods__ section of [Machine Learning task view](https://CRAN.R-project.org/view=MachineLearning
)) but these are the preferred.]

---
# Implementation .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 11]

.scrollable90[
.pull-left[

```r
# tuning grid
hyper_grid &lt;- expand.grid(
  alpha = seq(0, 1, by = .25),
  lambda = c(0.1, 10, 100, 1000, 10000)
)

# perform resampling
set.seed(123)
cv_glmnet &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  trControl = cv,
* method = "glmnet",
  preProcess = c("zv", "center", "scale"),
  tuneGrid = hyper_grid,
  metric = "RMSE"
  )

# best model
cv_glmnet$results %&gt;%
  filter(
    alpha == cv_glmnet$bestTune$alpha,
    lambda == cv_glmnet$bestTune$lambda
    )
##   alpha lambda    RMSE Rsquared      MAE   RMSESD RsquaredSD    MAESD
## 1     0  10000 31223.9 0.847993 16522.27 8883.647 0.07382721 1513.611
```
]

.pull-right[


```r
# plot results
plot(cv_glmnet)
```

&lt;img src="04-regression_files/figure-html/cv-glmnet-plot-1.png" style="display: block; margin: auto;" /&gt;

.center.bold[Regularization gives us a slight improvement (~$1K)]

]
]

---
class: center, middle, inverse

.font300.white[Multivariate Adaptive Regression Splines]

---
# The idea

* So far, we have tried to improve our linear model with various feature reduction and regularization approaches

* However, we are still assuming linear relationships

* The actual relationship(s) may have non-linear patterns that we cannot capture

&lt;img src="04-regression_files/figure-html/non-linearity-1.png" style="display: block; margin: auto;" /&gt;

---
# The idea

.font120[
* There are some traditional approaches we could take to capture non-linear relationships:
   - polynomial relationships
   - step function relationships
]

&lt;img src="04-regression_files/figure-html/traditional-nonlinear-approaches-1.png" style="display: block; margin: auto;" /&gt;

&lt;br&gt;

.center.bold.blue[However, these require the user explicitly identify &amp; incorporate <span class=" faa-slow animated " style=" display: -moz-inline-stack; display: inline-block; transform: rotate(0deg);">&lt;img src="https://emojis.slackmojis.com/emojis/images/1542340473/4983/yuck.gif?1542340473" style="height:2em; width:auto; "/&gt;</span>]

---
# The idea

.pull-left[

* Multivariate adaptive regression splines (MARS) provide a convenient &amp; automated approach to capture non-linearity

* Easy transition from linear regression to non-linearity methods

* Looks for .blue[knots] in predictors

&lt;br&gt;&lt;br&gt;

`\begin{equation}
  \text{y} = 
  \begin{cases}
    \beta_0 + \beta_1(1.183606 - \text{x}) &amp; \text{x} &lt; 1.183606, \\
    \beta_0 + \beta_1(\text{x} - 1.183606) &amp; \text{x} &gt; 1.183606
  \end{cases}
\end{equation}`

]

.pull-right[

&lt;img src="04-regression_files/figure-html/one-knot-1.png" style="display: block; margin: auto;" /&gt;

]

---
# The idea

.pull-left[

* Multivariate adaptive regression splines (MARS) provide a convenient &amp; automated approach to capture non-linearity

* Easy transition from linear regression to non-linearity methods

* Looks for .blue[knots] in predictors

&lt;br&gt;&lt;br&gt;

`\begin{equation}
  \text{y} = 
  \begin{cases}
    \beta_0 + \beta_1(1.183606 - \text{x}) &amp; \text{x} &lt; 1.183606, \\
    \beta_0 + \beta_1(\text{x} - 1.183606) &amp; \text{x} &gt; 1.183606 \quad \&amp; \quad \text{x} &lt; 4.898114, \\
    \beta_0 + \beta_1(4.898114 - \text{x}) &amp; \text{x} &gt; 4.898114
  \end{cases}
\end{equation}`

]

.pull-right[

&lt;img src="04-regression_files/figure-html/two-knots-1.png" style="display: block; margin: auto;" /&gt;

]

---
# The idea

.pull-left[

* Multivariate adaptive regression splines (MARS) provide a convenient &amp; automated approach to capture non-linearity

* Easy transition from linear regression to non-linearity methods

* Looks for .blue[knots] in predictors

]

.pull-right[

&lt;img src="04-regression_files/figure-html/three-knots-1.png" style="display: block; margin: auto;" /&gt;

]

---
# The idea

.pull-left[

* Multivariate adaptive regression splines (MARS) provide a convenient &amp; automated approach to capture non-linearity

* Easy transition from linear regression to non-linearity methods

* Looks for .blue[knots] in predictors

]

.pull-right[

&lt;img src="04-regression_files/figure-html/four-knots-1.png" style="display: block; margin: auto;" /&gt;

]

---
# The idea

.pull-left[

* Multivariate adaptive regression splines (MARS) provide a convenient &amp; automated approach to capture non-linearity

* Easy transition from linear regression to non-linearity methods

* Looks for .blue[knots] in predictors

]

.pull-right[

&lt;img src="04-regression_files/figure-html/nine-knots-1.png" style="display: block; margin: auto;" /&gt;

]

---
# R packages 📦

.pull-left[
## [`mda`](https://cran.r-project.org/package=mda)
* **m**ixture **d**iscriminant **a**nalysis
* Lightweight function `mars()`
    
* Gives quite similar results to Friedman's original FORTRAN program
* No formula method
]
.pull-right[
## [`earth`](http://www.milbo.users.sonic.net/earth/) 🌎
* **e**nhanced **a**daptive **r**egression **t**hrough **h**inges
* Derived from `mda::mars()`
    
* Support for GLMs (e.g., logistic regression)
    
* More bells and whistles than `mda::mars()`; for example,
    - Variable importance scores
    
    - Support for `\(k\)`-fold cross-validation)
    
]

---
# Tuning parameters .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 12]

MARS models have two tuning parameters:

.pull-left[

1. .blue[_nprune_]: the maximum number of terms in the pruned model (including the intercept)

2. .blue[_degree_]: the maximum degree of interaction

]

.pull-right[


```r
caret::getModelInfo("earth")$earth$parameters
##   parameter   class          label
## 1    nprune numeric         #Terms
## 2    degree numeric Product Degree
```

]

---
# Implementation .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 13]

.scrollable90[
.pull-left[

```r
# tuning grid
hyper_grid &lt;- expand.grid(
  nprune = seq(2, 50, length.out = 10) %&gt;% floor(),
  degree = 1:3
)

# perform resampling
set.seed(123)
cv_mars &lt;- train(
  Sale_Price ~ ., 
  data = ames_train, 
  trControl = cv,
* method = "earth",
  tuneGrid = hyper_grid,
  metric = "RMSE"
  )

# best model
cv_mars$results %&gt;%
  filter(
    nprune == cv_mars$bestTune$nprune,
    degree == cv_mars$bestTune$degree
    )
##   degree nprune     RMSE  Rsquared      MAE   RMSESD RsquaredSD    MAESD
## 1      1     34 26705.66 0.8894754 16874.05 5521.644  0.0375183 1475.742
```
]

.pull-right[


```r
# plot results
plot(cv_mars)
```

&lt;img src="04-regression_files/figure-html/cv-mars-plot-1.png" style="display: block; margin: auto;" /&gt;

.center.bold[MARS' non-linearity gives us a big improvement (~$4.5K)!]

]
]

---
class: center, middle, inverse

.font300.white[Model Comparison]

---
# Comparing error distributions .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 14]

.pull-left[


```r
results &lt;- resamples(list(
  OLS  = cv_model4, 
  PCR  = cv_pcr, 
  PLS  = cv_pls,
  EN   = cv_glmnet,
  MARS = cv_mars
  ))

summary(results)$statistics$RMSE
##          Min.  1st Qu.   Median     Mean  3rd Qu.     Max. NA's
## OLS  18834.46 28623.92 42438.30 44643.81 54707.54 97182.92    0
## PCR  23982.16 27808.91 30312.96 32995.73 38845.12 51513.31    0
## PLS  23477.17 26788.75 29516.73 32612.72 38827.09 52204.31    0
## EN   18146.03 23290.31 28011.76 31223.90 38184.16 51833.34    0
## MARS 20260.84 22463.84 24585.35 26705.66 30168.53 45845.05    0
```

]

.pull-right[

```r
p1 &lt;- bwplot(results, metric = "RMSE")
p2 &lt;- dotplot(results, metric = "RMSE")
gridExtra::grid.arrange(p1, p2, nrow = 1)
```

&lt;img src="04-regression_files/figure-html/compare-bwplot-1.png" style="display: block; margin: auto;" /&gt;

]

.center.bold[Student's *t*-test or a rank sum test could also be used.]

---
class: center, middle, inverse

.font300.white[Feature Interpretation]

---
# Feature importance .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 15]

.pull-left[

.center.bold.font120[vip]

* .bold[v]ariable .bold[i]mportance .bold[p]lots illustrate the influence each predictor has

* many packages have their own vip plots

* the __vip__ 📦 provides a common output

* different models measure "importance" differently

* we'll review this more indepth tomorrow

]

.pull-right[


```r
vip(cv_mars)
```

&lt;img src="04-regression_files/figure-html/mars-vip-1.png" style="display: block; margin: auto;" /&gt;

]

---
# Feature importance .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 16]

&lt;img src="04-regression_files/figure-html/all-vip-1.png" style="display: block; margin: auto;" /&gt;


---
# Feature importance

.scrollable90[
.pull-left.font130[

* Some models do not perform feature selection
  - OLS
  - PCR
  - PLS

]

.pull-right[

&lt;img src="04-regression_files/figure-html/no-feature-selection-1.png" style="display: block; margin: auto;" /&gt;

]
]

---
# Feature importance

.scrollable90[
.pull-left.font120[

* Some models do not perform feature selection
  - OLS
  - PCR
  - PLS
  
* Whereas some models do
  - Regularized regression
  - MARS

]

.pull-right[

&lt;img src="04-regression_files/figure-html/mars-feature-selection-1.png" style="display: block; margin: auto;" /&gt;

]
]

---
# Feature effects .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 17]

.pull-left[

* feature effects measures the relationship between a feature and the target variable

* most common approach is a .bold[p]artial .bold[d]ependence .bold[p]lot

* computs the average response value when all observations use a particular value for a given feature

* we will review this more tomorrow

]

.pull-right[


```r
pdp::partial(cv_model2, pred.var = "Gr_Liv_Area", grid.resolution = 10) %&gt;% 
  autoplot()
```

&lt;img src="04-regression_files/figure-html/ols-pdp-1.png" style="display: block; margin: auto;" /&gt;

]

---
# Feature effects .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 18]

&lt;br&gt;&lt;br&gt;

&lt;img src="04-regression_files/figure-html/all-pdps, -1.png" style="display: block; margin: auto;" /&gt;

---
# Feature effects .red[<span>&lt;i class="fas  fa-hand-point-right faa-horizontal animated " style=" color:red;"&gt;&lt;/i&gt;</span> code chunk 19]

Assess the interaction of the top 2 predictors:


```r
pdp::partial(cv_mars, pred.var = c("Gr_Liv_Area", "Year_Built"), grid.resolution = 10) %&gt;% 
  pdp::plotPartial(levelplot = FALSE, zlab = "yhat", drape = TRUE, colorkey = TRUE, screen = list(z = -20, x = -60))
```

&lt;img src="04-regression_files/figure-html/interaction-pdp-1.png" style="display: block; margin: auto;" /&gt;

---
class: center, middle, inverse

.font300.white[Wrapping up]

---
# Summary

.pull-left[
* Ordinary least squares
   - simple but lots of assumptions
   - typically poor predictive accuracy

* Principal Component Regression
   - minimizes multicollinearity
   - helps when `\(p &gt;&gt; n\)`

* Partial Least Squares
   - same benefits as PCR but
   - creates stronger signal btwn PCs and target
]

.pull-right[
* Regularized Regression
   - minimizes multicollinearity
   - helps when `\(p &gt;&gt; n\)`
   - can provide automated feature selection

* Multivariate Adaptive Regression Splines
   - captures non-linear relationships
   - can automatically capture interactions
   - provides automated feature selection
]

---
# Questions?

&lt;img src="https://66.media.tumblr.com/tumblr_lra006KFZc1qk976yo1_500.gif" width="80%" height="80%" style="display: block; margin: auto;" /&gt;

---
# Back home

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
[.center[<span>&lt;i class="fas  fa-home fa-10x faa-FALSE animated "&gt;&lt;/i&gt;</span>]](https://github.com/koalaverse/AnalyticsSummit19)

.center[https://github.com/koalaverse/AnalyticsSummit19]
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
